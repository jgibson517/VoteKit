
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ballot_graph_tutorial/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.7">
    
    
      
        <title>API Reference - VoteKit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="VoteKit" class="md-header__button md-logo" aria-label="VoteKit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VoteKit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mggg/VoteKit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mggg/VoteKit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VoteKit" class="md-nav__button md-logo" aria-label="VoteKit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    VoteKit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mggg/VoteKit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mggg/VoteKit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to VoteKit's documentation!
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started with VoteKit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../some_plotting_options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plotting, Summary Statistics, and More
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ballot_graph_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ballot Graphs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    Objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot.Ballot" class="md-nav__link">
    Ballot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile" class="md-nav__link">
    PreferenceProfile
  </a>
  
    <nav class="md-nav" aria-label="PreferenceProfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.condense_ballots" class="md-nav__link">
    condense_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.get_ballots" class="md-nav__link">
    get_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.get_candidates" class="md-nav__link">
    get_candidates()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.head" class="md-nav__link">
    head()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.num_ballots" class="md-nav__link">
    num_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.tail" class="md-nav__link">
    tail()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.to_csv" class="md-nav__link">
    to_csv()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState" class="md-nav__link">
    ElectionState
  </a>
  
    <nav class="md-nav" aria-label="ElectionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.changed_rankings" class="md-nav__link">
    changed_rankings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_all_eliminated" class="md-nav__link">
    get_all_eliminated()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_all_winners" class="md-nav__link">
    get_all_winners()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_rankings" class="md-nav__link">
    get_rankings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_round_outcome" class="md-nav__link">
    get_round_outcome()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.status" class="md-nav__link">
    status()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph" class="md-nav__link">
    BallotGraph
  </a>
  
    <nav class="md-nav" aria-label="BallotGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.build_graph" class="md-nav__link">
    build_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.draw" class="md-nav__link">
    draw()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.fix_short_ballot" class="md-nav__link">
    fix_short_ballot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.from_profile" class="md-nav__link">
    from_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.label_cands" class="md-nav__link">
    label_cands()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph" class="md-nav__link">
    PairwiseComparisonGraph
  </a>
  
    <nav class="md-nav" aria-label="PairwiseComparisonGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.ballot_fill" class="md-nav__link">
    ballot_fill()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.compute_pairwise_dict" class="md-nav__link">
    compute_pairwise_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.dominating_tiers" class="md-nav__link">
    dominating_tiers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.draw" class="md-nav__link">
    draw()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.has_condorcet" class="md-nav__link">
    has_condorcet()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.head2head_count" class="md-nav__link">
    head2head_count()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cvr-loaders" class="md-nav__link">
    CVR Loaders
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cvr_loaders.load_blt" class="md-nav__link">
    load_blt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cvr_loaders.load_csv" class="md-nav__link">
    load_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ballot-generators" class="md-nav__link">
    Ballot Generators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator" class="md-nav__link">
    BallotGenerator
  </a>
  
    <nav class="md-nav" aria-label="BallotGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.ballot_pool_to_profile" class="md-nav__link">
    ballot_pool_to_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.from_params" class="md-nav__link">
    from_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.generate_profile" class="md-nav__link">
    generate_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.round_num" class="md-nav__link">
    round_num()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex" class="md-nav__link">
    BallotSimplex
  </a>
  
    <nav class="md-nav" aria-label="BallotSimplex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex.from_alpha" class="md-nav__link">
    from_alpha()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex.from_point" class="md-nav__link">
    from_point()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.PlackettLuce" class="md-nav__link">
    PlackettLuce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BradleyTerry" class="md-nav__link">
    BradleyTerry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.AlternatingCrossover" class="md-nav__link">
    AlternatingCrossover
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.CambridgeSampler" class="md-nav__link">
    CambridgeSampler
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.OneDimSpatial" class="md-nav__link">
    OneDimSpatial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.ImpartialCulture" class="md-nav__link">
    ImpartialCulture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.ImpartialAnonymousCulture" class="md-nav__link">
    ImpartialAnonymousCulture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elections" class="md-nav__link">
    Elections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc" class="md-nav__link">
    Bloc
  </a>
  
    <nav class="md-nav" aria-label="Bloc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda" class="md-nav__link">
    Borda
  </a>
  
    <nav class="md-nav" aria-label="Borda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda" class="md-nav__link">
    CondoBorda
  </a>
  
    <nav class="md-nav" aria-label="CondoBorda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets" class="md-nav__link">
    DominatingSets
  </a>
  
    <nav class="md-nav" aria-label="DominatingSets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited" class="md-nav__link">
    Limited
  </a>
  
    <nav class="md-nav" aria-label="Limited">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Plurality" class="md-nav__link">
    Plurality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV" class="md-nav__link">
    SNTV
  </a>
  
    <nav class="md-nav" aria-label="SNTV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid" class="md-nav__link">
    SNTV_STV_Hybrid
  </a>
  
    <nav class="md-nav" aria-label="SNTV_STV_Hybrid">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV" class="md-nav__link">
    STV
  </a>
  
    <nav class="md-nav" aria-label="STV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.get_threshold" class="md-nav__link">
    get_threshold()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.next_round" class="md-nav__link">
    next_round()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV" class="md-nav__link">
    SequentialRCV
  </a>
  
    <nav class="md-nav" aria-label="SequentialRCV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo" class="md-nav__link">
    TopTwo
  </a>
  
    <nav class="md-nav" aria-label="TopTwo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning" class="md-nav__link">
    Cleaning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.clean_profile" class="md-nav__link">
    clean_profile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.deduplicate_profiles" class="md-nav__link">
    deduplicate_profiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.merge_ballots" class="md-nav__link">
    merge_ballots()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.remove_empty_ballots" class="md-nav__link">
    remove_empty_ballots()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.remove_noncands" class="md-nav__link">
    remove_noncands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.borda_scores" class="md-nav__link">
    borda_scores()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.first_place_votes" class="md-nav__link">
    first_place_votes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.mentions" class="md-nav__link">
    mentions()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.earth_mover_dist" class="md-nav__link">
    earth_mover_dist()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.lp_dist" class="md-nav__link">
    lp_dist()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.em_array" class="md-nav__link">
    em_array()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.fractional_transfer" class="md-nav__link">
    fractional_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.seqRCV_transfer" class="md-nav__link">
    seqRCV_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.random_transfer" class="md-nav__link">
    random_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotting" class="md-nav__link">
    Plotting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.mds.distance_matrix" class="md-nav__link">
    distance_matrix()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.mds.plot_MDS" class="md-nav__link">
    plot_MDS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.profile_plots.plot_summary_stats" class="md-nav__link">
    plot_summary_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    Utils
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.compute_votes" class="md-nav__link">
    compute_votes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.remove_cand" class="md-nav__link">
    remove_cand()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.unset" class="md-nav__link">
    unset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.recursively_fix_ties" class="md-nav__link">
    recursively_fix_ties()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.fix_ties" class="md-nav__link">
    fix_ties()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.elect_cands_from_set_ranking" class="md-nav__link">
    elect_cands_from_set_ranking()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.scores_into_set_list" class="md-nav__link">
    scores_into_set_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.tie_broken_ranking" class="md-nav__link">
    tie_broken_ranking()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.candidate_position_dict" class="md-nav__link">
    candidate_position_dict()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    Objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot.Ballot" class="md-nav__link">
    Ballot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile" class="md-nav__link">
    PreferenceProfile
  </a>
  
    <nav class="md-nav" aria-label="PreferenceProfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.condense_ballots" class="md-nav__link">
    condense_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.get_ballots" class="md-nav__link">
    get_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.get_candidates" class="md-nav__link">
    get_candidates()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.head" class="md-nav__link">
    head()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.num_ballots" class="md-nav__link">
    num_ballots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.tail" class="md-nav__link">
    tail()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.to_csv" class="md-nav__link">
    to_csv()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.pref_profile.PreferenceProfile.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState" class="md-nav__link">
    ElectionState
  </a>
  
    <nav class="md-nav" aria-label="ElectionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.changed_rankings" class="md-nav__link">
    changed_rankings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_all_eliminated" class="md-nav__link">
    get_all_eliminated()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_all_winners" class="md-nav__link">
    get_all_winners()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_rankings" class="md-nav__link">
    get_rankings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.get_round_outcome" class="md-nav__link">
    get_round_outcome()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.election_state.ElectionState.status" class="md-nav__link">
    status()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph" class="md-nav__link">
    BallotGraph
  </a>
  
    <nav class="md-nav" aria-label="BallotGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.build_graph" class="md-nav__link">
    build_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.draw" class="md-nav__link">
    draw()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.fix_short_ballot" class="md-nav__link">
    fix_short_ballot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.from_profile" class="md-nav__link">
    from_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.ballot_graph.BallotGraph.label_cands" class="md-nav__link">
    label_cands()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph" class="md-nav__link">
    PairwiseComparisonGraph
  </a>
  
    <nav class="md-nav" aria-label="PairwiseComparisonGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.ballot_fill" class="md-nav__link">
    ballot_fill()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.compute_pairwise_dict" class="md-nav__link">
    compute_pairwise_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.dominating_tiers" class="md-nav__link">
    dominating_tiers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.draw" class="md-nav__link">
    draw()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.has_condorcet" class="md-nav__link">
    has_condorcet()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.head2head_count" class="md-nav__link">
    head2head_count()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cvr-loaders" class="md-nav__link">
    CVR Loaders
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cvr_loaders.load_blt" class="md-nav__link">
    load_blt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cvr_loaders.load_csv" class="md-nav__link">
    load_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ballot-generators" class="md-nav__link">
    Ballot Generators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator" class="md-nav__link">
    BallotGenerator
  </a>
  
    <nav class="md-nav" aria-label="BallotGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.ballot_pool_to_profile" class="md-nav__link">
    ballot_pool_to_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.from_params" class="md-nav__link">
    from_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.generate_profile" class="md-nav__link">
    generate_profile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotGenerator.round_num" class="md-nav__link">
    round_num()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex" class="md-nav__link">
    BallotSimplex
  </a>
  
    <nav class="md-nav" aria-label="BallotSimplex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex.from_alpha" class="md-nav__link">
    from_alpha()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BallotSimplex.from_point" class="md-nav__link">
    from_point()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.PlackettLuce" class="md-nav__link">
    PlackettLuce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.BradleyTerry" class="md-nav__link">
    BradleyTerry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.AlternatingCrossover" class="md-nav__link">
    AlternatingCrossover
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.CambridgeSampler" class="md-nav__link">
    CambridgeSampler
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.OneDimSpatial" class="md-nav__link">
    OneDimSpatial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.ImpartialCulture" class="md-nav__link">
    ImpartialCulture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.ballot_generator.ImpartialAnonymousCulture" class="md-nav__link">
    ImpartialAnonymousCulture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elections" class="md-nav__link">
    Elections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc" class="md-nav__link">
    Bloc
  </a>
  
    <nav class="md-nav" aria-label="Bloc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Bloc.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda" class="md-nav__link">
    Borda
  </a>
  
    <nav class="md-nav" aria-label="Borda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Borda.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda" class="md-nav__link">
    CondoBorda
  </a>
  
    <nav class="md-nav" aria-label="CondoBorda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.CondoBorda.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets" class="md-nav__link">
    DominatingSets
  </a>
  
    <nav class="md-nav" aria-label="DominatingSets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.DominatingSets.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited" class="md-nav__link">
    Limited
  </a>
  
    <nav class="md-nav" aria-label="Limited">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Limited.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.Plurality" class="md-nav__link">
    Plurality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV" class="md-nav__link">
    SNTV
  </a>
  
    <nav class="md-nav" aria-label="SNTV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid" class="md-nav__link">
    SNTV_STV_Hybrid
  </a>
  
    <nav class="md-nav" aria-label="SNTV_STV_Hybrid">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV" class="md-nav__link">
    STV
  </a>
  
    <nav class="md-nav" aria-label="STV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.get_threshold" class="md-nav__link">
    get_threshold()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.next_round" class="md-nav__link">
    next_round()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.STV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV" class="md-nav__link">
    SequentialRCV
  </a>
  
    <nav class="md-nav" aria-label="SequentialRCV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.SequentialRCV.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo" class="md-nav__link">
    TopTwo
  </a>
  
    <nav class="md-nav" aria-label="TopTwo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo.run_election" class="md-nav__link">
    run_election()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#votekit.elections.election_types.TopTwo.run_step" class="md-nav__link">
    run_step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning" class="md-nav__link">
    Cleaning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.clean_profile" class="md-nav__link">
    clean_profile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.deduplicate_profiles" class="md-nav__link">
    deduplicate_profiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.merge_ballots" class="md-nav__link">
    merge_ballots()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.remove_empty_ballots" class="md-nav__link">
    remove_empty_ballots()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.cleaning.remove_noncands" class="md-nav__link">
    remove_noncands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.borda_scores" class="md-nav__link">
    borda_scores()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.first_place_votes" class="md-nav__link">
    first_place_votes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.mentions" class="md-nav__link">
    mentions()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.earth_mover_dist" class="md-nav__link">
    earth_mover_dist()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.lp_dist" class="md-nav__link">
    lp_dist()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.metrics.distances.em_array" class="md-nav__link">
    em_array()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.fractional_transfer" class="md-nav__link">
    fractional_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.seqRCV_transfer" class="md-nav__link">
    seqRCV_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.elections.transfers.random_transfer" class="md-nav__link">
    random_transfer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotting" class="md-nav__link">
    Plotting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.mds.distance_matrix" class="md-nav__link">
    distance_matrix()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.mds.plot_MDS" class="md-nav__link">
    plot_MDS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.plots.profile_plots.plot_summary_stats" class="md-nav__link">
    plot_summary_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    Utils
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.compute_votes" class="md-nav__link">
    compute_votes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.remove_cand" class="md-nav__link">
    remove_cand()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.unset" class="md-nav__link">
    unset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.recursively_fix_ties" class="md-nav__link">
    recursively_fix_ties()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.fix_ties" class="md-nav__link">
    fix_ties()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.elect_cands_from_set_ranking" class="md-nav__link">
    elect_cands_from_set_ranking()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.scores_into_set_list" class="md-nav__link">
    scores_into_set_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.tie_broken_ranking" class="md-nav__link">
    tie_broken_ranking()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#votekit.utils.candidate_position_dict" class="md-nav__link">
    candidate_position_dict()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<h2 id="objects">Objects<a class="headerlink" href="#objects" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.ballot.Ballot" class="doc doc-heading">
          <code>Ballot</code>


<a href="#votekit.ballot.Ballot" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Ballot class, contains ranking and assigned weight</p>
<p><strong>Attributes</strong></p>
<p><code>id</code>
:   optionally assigned ballot id</p>
<p><code>ranking</code>
:   list of candidate ranking</p>
<p><code>weight</code>
:   weight assigned to a given a ballot</p>
<p><code>voters</code>
:   list of voters who cast a given a ballot</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Ballot</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ballot class, contains ranking and assigned weight</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `id`</span>
<span class="sd">    :   optionally assigned ballot id</span>

<span class="sd">    `ranking`</span>
<span class="sd">    :   list of candidate ranking</span>

<span class="sd">    `weight`</span>
<span class="sd">    :   weight assigned to a given a ballot</span>

<span class="sd">    `voters`</span>
<span class="sd">    :   list of voters who cast a given a ballot</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ranking</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">]</span>
    <span class="n">weight</span><span class="p">:</span> <span class="n">Fraction</span>
    <span class="n">voters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># Check type</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Ballot</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check id</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check ranking</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranking</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check weight</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">weight</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check voters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voters</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">voters</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ranking</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.pref_profile.PreferenceProfile" class="doc doc-heading">
          <code>PreferenceProfile</code>


<a href="#votekit.pref_profile.PreferenceProfile" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>PreferenceProfile class, contains ballots and and candidates for a
    given eleciton</p>
<p><strong>Attributes</strong></p>
<p><code>ballots</code>
:   list of <code>Ballot</code> objects</p>
<p><code>candiates</code>
:   list of candidates</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PreferenceProfile</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PreferenceProfile class, contains ballots and and candidates for a</span>
<span class="sd">        given eleciton</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `ballots`</span>
<span class="sd">    :   list of `Ballot` objects</span>

<span class="sd">    `candiates`</span>
<span class="sd">    :   list of candidates</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">candidates</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;candidates&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">cands_must_be_unique</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">candidates</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">candidates</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidates</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;all candidates must be unique&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">candidates</span>

    <span class="k">def</span> <span class="nf">get_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns list of ballots</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span>

    <span class="k">def</span> <span class="nf">get_candidates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns list of unique candidates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unique_cands</span><span class="p">:</span> <span class="nb">set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="n">unique_cands</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">unique_cands</span><span class="p">)</span>

    <span class="c1"># can also cache</span>
    <span class="k">def</span> <span class="nf">num_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fraction</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Counts number of ballots based on assigned weight</span>

<span class="sd">        Returns:</span>
<span class="sd">            Number of ballots cast</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_ballots</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="n">num_ballots</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

        <span class="k">return</span> <span class="n">num_ballots</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">standardize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts ballots to dictionary with rankings (keys) and the</span>
<span class="sd">        corresponding total weights (values)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with with ranking (keys) and corresponding total \n</span>
<span class="sd">            weights (values)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span>
        <span class="n">di</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="n">rank_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">standardize</span><span class="p">:</span>
                <span class="n">weight</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="n">num_ballots</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">weight</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
            <span class="k">if</span> <span class="n">rank_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">di</span><span class="p">[</span><span class="n">rank_tuple</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">di</span><span class="p">[</span><span class="n">rank_tuple</span><span class="p">]</span> <span class="o">+=</span> <span class="n">weight</span>
        <span class="k">return</span> <span class="n">di</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fpath</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves Preference Profile to CSV</span>
<span class="sd">        Args:</span>
<span class="sd">            fpath (str): path to the saved csv</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
            <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">,</span> <span class="s2">&quot;ranking&quot;</span><span class="p">]</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">({</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="s2">&quot;ranking&quot;</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">_create_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates DF for display and building plots</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="n">part</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">part</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cand</span><span class="si">}</span><span class="s2"> (Tie)&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">part</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand</span><span class="p">)</span>
            <span class="n">ballots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">part</span><span class="p">))</span>
            <span class="n">weights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Ballots&quot;</span><span class="p">:</span> <span class="n">ballots</span><span class="p">,</span> <span class="s2">&quot;Weight&quot;</span><span class="p">:</span> <span class="n">weights</span><span class="p">})</span>
        <span class="c1"># df[&quot;Ballots&quot;] = df[&quot;Ballots&quot;].astype(str).str.ljust(60)</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Weight&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Weight&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="c1"># fill nans with zero for edge cases</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="c1"># df[&quot;Weight&quot;] = df[&quot;Weight&quot;].astype(str).str.rjust(3)</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">percents</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays top-n ballots in profile based on weight</span>

<span class="sd">        Args:</span>
<span class="sd">            n: Number of ballots to view</span>
<span class="sd">            percents: If True, show voter share for a given ballot</span>
<span class="sd">            totals: If true, show total values for Voter Share and Weight</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dataframe with top-n ballots</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_df</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">totals</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">_sum_row</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">percents</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">def</span> <span class="nf">tail</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">percents</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays bottom-n ballots in profile based on weight</span>

<span class="sd">        Args:</span>
<span class="sd">            n: Number of ballots to view</span>
<span class="sd">            percents: If True, show voter share for a given ballot</span>
<span class="sd">            totals: If true, show total values for Voter Share and Weight</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dataframe with bottom-n ballots</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_df</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">totals</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">_sum_row</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">percents</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># Displays top 15 cast ballots or entire profile</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_df</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">))</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;justify&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;justify&quot;</span><span class="p">)</span>

    <span class="c1"># set repr to print outputs</span>
    <span class="fm">__repr__</span> <span class="o">=</span> <span class="fm">__str__</span>

    <span class="k">def</span> <span class="nf">condense_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Groups ballots by rankings and updates weights</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">class_vector</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen_rankings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_rankings</span><span class="p">:</span>
                <span class="n">seen_rankings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
            <span class="n">class_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seen_rankings</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">))</span>

        <span class="n">new_ballot_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">seen_rankings</span><span class="p">):</span>
            <span class="n">total_weight</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">class_vector</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">class_vector</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
                    <span class="n">total_weight</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
            <span class="n">new_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">total_weight</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span> <span class="o">=</span> <span class="n">new_ballot_list</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PreferenceProfile</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condense_ballots</span><span class="p">()</span>
        <span class="n">other</span><span class="o">.</span><span class="n">condense_ballots</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">b</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">b</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.condense_ballots" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">condense_ballots</span><span class="p">()</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.condense_ballots" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Groups ballots by rankings and updates weights</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">condense_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Groups ballots by rankings and updates weights</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">class_vector</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">seen_rankings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_rankings</span><span class="p">:</span>
            <span class="n">seen_rankings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">class_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seen_rankings</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">))</span>

    <span class="n">new_ballot_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">seen_rankings</span><span class="p">):</span>
        <span class="n">total_weight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">class_vector</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">class_vector</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
                <span class="n">total_weight</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
        <span class="n">new_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">total_weight</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span> <span class="o">=</span> <span class="n">new_ballot_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.get_ballots" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_ballots</span><span class="p">()</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.get_ballots" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns list of ballots</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns list of ballots</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.get_candidates" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_candidates</span><span class="p">()</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.get_candidates" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns list of unique candidates</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_candidates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns list of unique candidates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_cands</span><span class="p">:</span> <span class="nb">set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
        <span class="n">unique_cands</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">unique_cands</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.head" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">percents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.head" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Displays top-n ballots in profile based on weight</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of ballots to view</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>percents</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, show voter share for a given ballot</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>totals</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If true, show total values for Voter Share and Weight</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataframe with top-n ballots</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">head</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">percents</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays top-n ballots in profile based on weight</span>

<span class="sd">    Args:</span>
<span class="sd">        n: Number of ballots to view</span>
<span class="sd">        percents: If True, show voter share for a given ballot</span>
<span class="sd">        totals: If true, show total values for Voter Share and Weight</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dataframe with top-n ballots</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_df</span><span class="p">()</span>

    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">totals</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">_sum_row</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">percents</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.num_ballots" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">num_ballots</span><span class="p">()</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.num_ballots" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Counts number of ballots based on assigned weight</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="fractions.Fraction">Fraction</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of ballots cast</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">num_ballots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fraction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counts number of ballots based on assigned weight</span>

<span class="sd">    Returns:</span>
<span class="sd">        Number of ballots cast</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_ballots</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
        <span class="n">num_ballots</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

    <span class="k">return</span> <span class="n">num_ballots</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.tail" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">tail</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">percents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.tail" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Displays bottom-n ballots in profile based on weight</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of ballots to view</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>percents</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, show voter share for a given ballot</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>totals</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If true, show total values for Voter Share and Weight</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataframe with bottom-n ballots</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">tail</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">percents</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">totals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays bottom-n ballots in profile based on weight</span>

<span class="sd">    Args:</span>
<span class="sd">        n: Number of ballots to view</span>
<span class="sd">        percents: If True, show voter share for a given ballot</span>
<span class="sd">        totals: If true, show total values for Voter Share and Weight</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dataframe with bottom-n ballots</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_df</span><span class="p">()</span>

    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">totals</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">_sum_row</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">percents</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Voter Share&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.to_csv" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.to_csv" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Saves Preference Profile to CSV
Args:
    fpath (str): path to the saved csv</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fpath</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves Preference Profile to CSV</span>
<span class="sd">    Args:</span>
<span class="sd">        fpath (str): path to the saved csv</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
        <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">,</span> <span class="s2">&quot;ranking&quot;</span><span class="p">]</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">({</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="s2">&quot;ranking&quot;</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.pref_profile.PreferenceProfile.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">(</span><span class="n">standardize</span><span class="p">)</span></code>

<a href="#votekit.pref_profile.PreferenceProfile.to_dict" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Converts ballots to dictionary with rankings (keys) and the
corresponding total weights (values)</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary with with ranking (keys) and corresponding total </p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>weights (values)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/pref_profile.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">standardize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts ballots to dictionary with rankings (keys) and the</span>
<span class="sd">    corresponding total weights (values)</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary with with ranking (keys) and corresponding total \n</span>
<span class="sd">        weights (values)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span>
    <span class="n">di</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
        <span class="n">rank_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">standardize</span><span class="p">:</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="n">num_ballots</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
        <span class="k">if</span> <span class="n">rank_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">di</span><span class="p">[</span><span class="n">rank_tuple</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">di</span><span class="p">[</span><span class="n">rank_tuple</span><span class="p">]</span> <span class="o">+=</span> <span class="n">weight</span>
    <span class="k">return</span> <span class="n">di</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.election_state.ElectionState" class="doc doc-heading">
          <code>ElectionState</code>


<a href="#votekit.election_state.ElectionState" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Class for storing information on each round of a RCV election and the final outcome.</p>
<p><strong>Attributes</strong>
<code>curr_round</code>
:   current round number. Defaults to 0</p>
<p><code>elected</code>
:   list of candidates who pass a threshold to win</p>
<p><code>eliminated</code>
:   list of candidates who were eliminated</p>
<p><code>remaining</code>
:   list of candidates who are still in the running</p>
<p><code>rankings</code>
:   list ranking of candidates with sets representing ties</p>
<p><code>profile</code>
:   an instance of a preference profile object</p>
<p><code>previous</code>
:   an instance of ElectionState representing potential previous round</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/election_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ElectionState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for storing information on each round of a RCV election and the final outcome.</span>

<span class="sd">    **Attributes**</span>
<span class="sd">    `curr_round`</span>
<span class="sd">    :   current round number. Defaults to 0</span>

<span class="sd">    `elected`</span>
<span class="sd">    :   list of candidates who pass a threshold to win</span>


<span class="sd">    `eliminated`</span>
<span class="sd">    :   list of candidates who were eliminated</span>

<span class="sd">    `remaining`</span>
<span class="sd">    :   list of candidates who are still in the running</span>

<span class="sd">    `rankings`</span>
<span class="sd">    :   list ranking of candidates with sets representing ties</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   an instance of a preference profile object</span>

<span class="sd">    `previous`</span>
<span class="sd">    :   an instance of ElectionState representing potential previous round</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">curr_round</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">elected</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">eliminated</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">remaining</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span>
    <span class="n">previous</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ElectionState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_all_winners</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of elected candidates ordered from first round to current round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span>

    <span class="k">def</span> <span class="nf">get_all_eliminated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of eliminated candidates ordered from current round to first round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span>

    <span class="k">def</span> <span class="nf">get_rankings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns list of all candidates in order of their ranking after each round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining</span> <span class="o">!=</span> <span class="p">[{}]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_round_outcome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roundNum</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="c1"># {&#39;elected&#39;:list[set[str]], &#39;eliminated&#39;:list[set[str]]}</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary with elected and eliminated candidates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">==</span> <span class="n">roundNum</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;Elected&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">],</span>
                <span class="s2">&quot;Eliminated&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_round_outcome</span><span class="p">(</span><span class="n">roundNum</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Round number out of range&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">changed_rankings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns dict of (key) candidate(s) who changed</span>
<span class="sd">        ranking from previous round and (value) a tuple of (previous rank, new rank)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This is the first round, cannot compare previous ranking&quot;</span><span class="p">)</span>

        <span class="n">prev_ranking</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">candidate_position_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">())</span>
        <span class="n">curr_ranking</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">candidate_position_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">curr_ranking</span> <span class="o">==</span> <span class="n">prev_ranking</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">changes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">curr_ranking</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">prev_ranking</span><span class="p">[</span><span class="n">candidate</span><span class="p">]</span> <span class="o">!=</span> <span class="n">index</span><span class="p">:</span>
                <span class="n">changes</span><span class="p">[</span><span class="n">candidate</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev_ranking</span><span class="p">[</span><span class="n">candidate</span><span class="p">],</span> <span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">changes</span>

    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns dataframe displaying candidate, status (elected, eliminated,</span>
<span class="sd">        remaining), and the round their status updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_cands</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
        <span class="n">status_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;Candidate&quot;</span><span class="p">:</span> <span class="n">all_cands</span><span class="p">,</span>
                <span class="s2">&quot;Status&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Remaining&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_cands</span><span class="p">),</span>
                <span class="s2">&quot;Round&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_cands</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="nb">round</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_round_outcome</span><span class="p">(</span><span class="nb">round</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">status</span><span class="p">,</span> <span class="n">candidates</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
                    <span class="n">status_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">status_df</span><span class="p">[</span><span class="s2">&quot;Candidate&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cand</span><span class="p">,</span> <span class="s2">&quot;Status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">status</span>
                    <span class="n">status_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">status_df</span><span class="p">[</span><span class="s2">&quot;Candidate&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cand</span><span class="p">,</span> <span class="s2">&quot;Round&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span>

        <span class="k">return</span> <span class="n">status_df</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">show</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">show</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;justify&quot;</span><span class="p">)</span>

    <span class="fm">__repr__</span> <span class="o">=</span> <span class="fm">__str__</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.changed_rankings" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">changed_rankings</span><span class="p">()</span></code>

<a href="#votekit.election_state.ElectionState.changed_rankings" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns dict of (key) candidate(s) who changed
ranking from previous round and (value) a tuple of (previous rank, new rank)</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">changed_rankings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns dict of (key) candidate(s) who changed</span>
<span class="sd">    ranking from previous round and (value) a tuple of (previous rank, new rank)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This is the first round, cannot compare previous ranking&quot;</span><span class="p">)</span>

    <span class="n">prev_ranking</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">candidate_position_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">())</span>
    <span class="n">curr_ranking</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">candidate_position_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">curr_ranking</span> <span class="o">==</span> <span class="n">prev_ranking</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">changes</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">curr_ranking</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">prev_ranking</span><span class="p">[</span><span class="n">candidate</span><span class="p">]</span> <span class="o">!=</span> <span class="n">index</span><span class="p">:</span>
            <span class="n">changes</span><span class="p">[</span><span class="n">candidate</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev_ranking</span><span class="p">[</span><span class="n">candidate</span><span class="p">],</span> <span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">changes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.get_all_eliminated" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_all_eliminated</span><span class="p">()</span></code>

<a href="#votekit.election_state.ElectionState.get_all_eliminated" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of eliminated candidates ordered from current round to first round</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_eliminated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of eliminated candidates ordered from current round to first round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.get_all_winners" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_all_winners</span><span class="p">()</span></code>

<a href="#votekit.election_state.ElectionState.get_all_winners" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of elected candidates ordered from first round to current round</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_winners</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of elected candidates ordered from first round to current round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.get_rankings" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_rankings</span><span class="p">()</span></code>

<a href="#votekit.election_state.ElectionState.get_rankings" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns list of all candidates in order of their ranking after each round</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_rankings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns list of all candidates in order of their ranking after each round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining</span> <span class="o">!=</span> <span class="p">[{}]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.get_round_outcome" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_round_outcome</span><span class="p">(</span><span class="n">roundNum</span><span class="p">)</span></code>

<a href="#votekit.election_state.ElectionState.get_round_outcome" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a dictionary with elected and eliminated candidates</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_round_outcome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roundNum</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="c1"># {&#39;elected&#39;:list[set[str]], &#39;eliminated&#39;:list[set[str]]}</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary with elected and eliminated candidates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">==</span> <span class="n">roundNum</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;Elected&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elected</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">],</span>
            <span class="s2">&quot;Eliminated&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminated</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">],</span>
        <span class="p">}</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="o">.</span><span class="n">get_round_outcome</span><span class="p">(</span><span class="n">roundNum</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Round number out of range&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.election_state.ElectionState.status" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">status</span><span class="p">()</span></code>

<a href="#votekit.election_state.ElectionState.status" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns dataframe displaying candidate, status (elected, eliminated,
remaining), and the round their status updated</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/election_state.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns dataframe displaying candidate, status (elected, eliminated,</span>
<span class="sd">    remaining), and the round their status updated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_cands</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
    <span class="n">status_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;Candidate&quot;</span><span class="p">:</span> <span class="n">all_cands</span><span class="p">,</span>
            <span class="s2">&quot;Status&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Remaining&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_cands</span><span class="p">),</span>
            <span class="s2">&quot;Round&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_cands</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="nb">round</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_round_outcome</span><span class="p">(</span><span class="nb">round</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">status</span><span class="p">,</span> <span class="n">candidates</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
                <span class="n">status_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">status_df</span><span class="p">[</span><span class="s2">&quot;Candidate&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cand</span><span class="p">,</span> <span class="s2">&quot;Status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">status</span>
                <span class="n">status_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">status_df</span><span class="p">[</span><span class="s2">&quot;Candidate&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cand</span><span class="p">,</span> <span class="s2">&quot;Round&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span>

    <span class="k">return</span> <span class="n">status_df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.graphs.ballot_graph.BallotGraph" class="doc doc-heading">
          <code>BallotGraph</code>


<a href="#votekit.graphs.ballot_graph.BallotGraph" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.graphs.base_graph.Graph">Graph</span></code></p>

  
      <p>Class to build ballot graphs.</p>
<p><strong>Attributes</strong></p>
<p><code>source</code>
:   data to create graph from, either PreferenceProfile object, number of
        candidates, or list of candidates</p>
<p><code>allow_partial</code>
:   if True, builds graph using all possible ballots,
    if False, only uses total linear ordered ballots
    if building from a PreferenceProfile, defaults to True</p>
<p><code>fix_short</code>
: if True, auto completes ballots of length n-1 to n.</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BallotGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to build ballot graphs.</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `source`</span>
<span class="sd">    :   data to create graph from, either PreferenceProfile object, number of</span>
<span class="sd">            candidates, or list of candidates</span>

<span class="sd">    `allow_partial`</span>
<span class="sd">    :   if True, builds graph using all possible ballots,</span>
<span class="sd">        if False, only uses total linear ordered ballots</span>
<span class="sd">        if building from a PreferenceProfile, defaults to True</span>

<span class="sd">    `fix_short`</span>
<span class="sd">    : if True, auto completes ballots of length n-1 to n.</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PreferenceProfile</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">],</span>
        <span class="n">allow_partial</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fix_short</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allow_partial</span> <span class="o">=</span> <span class="n">allow_partial</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_cands</span> <span class="o">=</span> <span class="n">source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_cands</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="n">source</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">PreferenceProfile</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_cands</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">allow_partial</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_profile</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">fix_short</span> <span class="o">=</span> <span class="n">fix_short</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="c1"># if no partial ballots allowed, create induced subgraph</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_partial</span><span class="p">:</span>
            <span class="n">total_ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_cands</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">total_ballots</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span> <span class="o">=</span> <span class="p">{</span><span class="n">ballot</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_relabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gr</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">,</span> <span class="n">new_label</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_cands</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Relabels nodes in gr based on new_label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">graph_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graph_nodes</span><span class="p">:</span>
            <span class="c1"># add the value of new_label to every entry in every ballot</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_label</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">k</span><span class="p">]</span>

            <span class="c1"># reduce everything mod new_label</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">num_cands</span><span class="p">:</span>
                    <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">num_cands</span>
            <span class="n">node_map</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">new_label</span><span class="p">]</span> <span class="o">+</span> <span class="n">tmp</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nx</span><span class="o">.</span><span class="n">relabel_nodes</span><span class="p">(</span><span class="n">gr</span><span class="p">,</span> <span class="n">node_map</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">:</span>  <span class="c1"># ask Gabe about optimizing?</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds graph of all possible ballots given a number of candiates</span>

<span class="sd">        Args:</span>
<span class="sd">            n: number of candidates per an election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Gc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
        <span class="c1"># base cases</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">)],</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))])</span>

        <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">G_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="c1"># add the node for the bullet vote i</span>
                <span class="n">Gc</span><span class="o">.</span><span class="n">add_node</span><span class="p">((</span><span class="n">i</span><span class="p">,),</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                <span class="c1"># make the subgraph for the ballots where i is ranked first</span>
                <span class="n">G_corner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relabel</span><span class="p">(</span><span class="n">G_prev</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

                <span class="c1"># add the components from that graph to the larger graph</span>
                <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">G_corner</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>

                <span class="c1"># connect the bullet vote node to the appropriate vertices</span>
                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span>
                        <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="p">)</span>

            <span class="n">nodes</span> <span class="o">=</span> <span class="n">Gc</span><span class="o">.</span><span class="n">nodes</span>

            <span class="n">new_edges</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">bal</span><span class="p">,</span> <span class="p">(</span><span class="n">bal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">bal</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span> <span class="k">for</span> <span class="n">bal</span> <span class="ow">in</span> <span class="n">nodes</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bal</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
            <span class="p">]</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">new_edges</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gc</span>

    <span class="k">def</span> <span class="nf">from_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">fix_short</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates existing graph based on cast ballots from a PreferenceProfile,</span>
<span class="sd">        or creates graph based on PreferenceProfile</span>

<span class="sd">        Args:</span>
<span class="sd">            profile: PreferenceProfile assigned to graph</span>


<span class="sd">        Returns:</span>
<span class="sd">            Graph based on PreferenceProfile, &#39;cast&#39; node attribute indicates</span>
<span class="sd">                    ballots cast in PreferenceProfile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
        <span class="n">ballots</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_cands</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span> <span class="o">=</span> <span class="p">{</span><span class="n">ballot</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
            <span class="n">ballot_node</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;ballots must be cleaned to resolve ties&quot;</span>
                    <span class="p">)</span>  <span class="c1"># still unsure about ties</span>
                <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">position</span><span class="p">:</span>
                    <span class="n">ballot_node</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span><span class="p">[</span><span class="n">cand</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">fix_short</span><span class="p">:</span>
                <span class="n">ballot_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fix_short_ballot</span><span class="p">(</span>
                    <span class="n">ballot_node</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)][</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)][</span><span class="s2">&quot;cast&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span>

    <span class="k">def</span> <span class="nf">fix_short_ballot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ballot</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">candidates</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends short ballots of n-1 length to add to BallotGraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ballot</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">ballot</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">label_cands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candidates</span><span class="p">,</span>
                    <span class="n">to_display</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">all_nodes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns candidate labels to ballot graph for plotting</span>

<span class="sd">        Args:</span>
<span class="sd">            to_display: a Boolean callable that takes in a graph and node </span>
<span class="sd">                        returns True if node  should be displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">candidate_numbers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_cands</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">candidates</span><span class="p">))</span>

        <span class="n">cand_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">candidate_numbers</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="n">cand_labels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">to_display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
                <span class="n">ballot</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
                    <span class="n">ballot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand_dict</span><span class="p">[</span><span class="n">num</span><span class="p">])</span>

                <span class="c1"># label the ballot and give the number of votes</span>
                <span class="n">cand_labels</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;: &quot;</span> <span class="o">+</span> \
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;weight&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">cand_labels</span>

    <span class="nd">@cache</span>
    <span class="k">def</span> <span class="nf">_number_cands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cands</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns numerical marker to candidates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">cand</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cands</span><span class="p">):</span>
            <span class="n">legend</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">legend</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to_display</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">all_nodes</span><span class="p">,</span>
             <span class="n">neighborhoods</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
             <span class="n">show_cast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Visualize the graph.</span>

<span class="sd">        Args:</span>
<span class="sd">            to_display: a boolean function that takes graph and node as input, returns True if you</span>
<span class="sd">                        want that node displayed. Defaults to showing all nodes.</span>
<span class="sd">            neighborhoods: a list of neighborhoods to display, given as tuple (node, radius).</span>
<span class="sd">                            (n,1) gives all nodes within one step of n.</span>
<span class="sd">            show_cast: If True, show only nodes with &quot;cast&quot; attribute = True.</span>
<span class="sd">                        If False, show all nodes.</span>
<span class="sd">            labels: If True, labels nodes with candidate names and vote totals</span>
<span class="sd">        &quot;&quot;&quot;</span>


        <span class="k">def</span> <span class="nf">cast_nodes</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;cast&quot;</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">in_neighborhoods</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
            <span class="n">centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">neighborhoods</span><span class="p">]</span>
            <span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">radius</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">neighborhoods</span><span class="p">]</span>

            <span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">shortest_path_length</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">centers</span><span class="p">]</span>

            <span class="k">return</span> <span class="p">(</span><span class="kc">True</span> <span class="ow">in</span> <span class="p">[</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="k">for</span> <span class="n">d</span><span class="p">,</span><span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">radii</span><span class="p">)])</span>

        <span class="k">if</span> <span class="n">show_cast</span><span class="p">:</span>
            <span class="n">to_display</span> <span class="o">=</span> <span class="n">cast_nodes</span>

        <span class="k">if</span> <span class="n">neighborhoods</span><span class="p">:</span>
            <span class="n">to_display</span> <span class="o">=</span> <span class="n">in_neighborhoods</span>

        <span class="n">ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">to_display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">n</span><span class="p">)]</span>

        <span class="n">node_labels</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">labels</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;no candidate names assigned&quot;</span><span class="p">)</span>
            <span class="n">node_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_cands</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="n">to_display</span><span class="p">)</span>

        <span class="n">subgraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span>

        <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">subgraph</span><span class="p">)</span>
        <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">subgraph</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="p">,</span> 
                         <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">node_labels</span><span class="p">)</span>

        <span class="c1"># handles labels overlapping with margins</span>
        <span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>
        <span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>
        <span class="n">x_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="n">y_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x_min</span> <span class="o">-</span> <span class="n">x_margin</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">+</span> <span class="n">x_margin</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">y_min</span> <span class="o">-</span> <span class="n">y_margin</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="n">y_margin</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.ballot_graph.BallotGraph.build_graph" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">build_graph</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

<a href="#votekit.graphs.ballot_graph.BallotGraph.build_graph" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Builds graph of all possible ballots given a number of candiates</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of candidates per an election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">:</span>  <span class="c1"># ask Gabe about optimizing?</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds graph of all possible ballots given a number of candiates</span>

<span class="sd">    Args:</span>
<span class="sd">        n: number of candidates per an election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Gc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="c1"># base cases</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">)],</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))])</span>

    <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">G_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># add the node for the bullet vote i</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_node</span><span class="p">((</span><span class="n">i</span><span class="p">,),</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># make the subgraph for the ballots where i is ranked first</span>
            <span class="n">G_corner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relabel</span><span class="p">(</span><span class="n">G_prev</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

            <span class="c1"># add the components from that graph to the larger graph</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">G_corner</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>

            <span class="c1"># connect the bullet vote node to the appropriate vertices</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span>
                    <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">G_corner</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="n">Gc</span><span class="o">.</span><span class="n">nodes</span>

        <span class="n">new_edges</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">bal</span><span class="p">,</span> <span class="p">(</span><span class="n">bal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">bal</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span> <span class="k">for</span> <span class="n">bal</span> <span class="ow">in</span> <span class="n">nodes</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bal</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
        <span class="p">]</span>
        <span class="n">Gc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">new_edges</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Gc</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.ballot_graph.BallotGraph.draw" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">draw</span><span class="p">(</span><span class="n">to_display</span><span class="o">=</span><span class="n">all_nodes</span><span class="p">,</span> <span class="n">neighborhoods</span><span class="o">=</span><span class="p">[],</span> <span class="n">show_cast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#votekit.graphs.ballot_graph.BallotGraph.draw" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Visualize the graph.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>to_display</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a boolean function that takes graph and node as input, returns True if you
        want that node displayed. Defaults to showing all nodes.</p>
            </div>
          </td>
          <td>
                <code><span title="votekit.graphs.ballot_graph.all_nodes">all_nodes</span></code>
          </td>
        </tr>
        <tr>
          <td><code>neighborhoods</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[list[tuple]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of neighborhoods to display, given as tuple (node, radius).
            (n,1) gives all nodes within one step of n.</p>
            </div>
          </td>
          <td>
                <code>[]</code>
          </td>
        </tr>
        <tr>
          <td><code>show_cast</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, show only nodes with "cast" attribute = True.
        If False, show all nodes.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, labels nodes with candidate names and vote totals</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to_display</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">all_nodes</span><span class="p">,</span>
         <span class="n">neighborhoods</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
         <span class="n">show_cast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
         <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Visualize the graph.</span>

<span class="sd">    Args:</span>
<span class="sd">        to_display: a boolean function that takes graph and node as input, returns True if you</span>
<span class="sd">                    want that node displayed. Defaults to showing all nodes.</span>
<span class="sd">        neighborhoods: a list of neighborhoods to display, given as tuple (node, radius).</span>
<span class="sd">                        (n,1) gives all nodes within one step of n.</span>
<span class="sd">        show_cast: If True, show only nodes with &quot;cast&quot; attribute = True.</span>
<span class="sd">                    If False, show all nodes.</span>
<span class="sd">        labels: If True, labels nodes with candidate names and vote totals</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="nf">cast_nodes</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;cast&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">in_neighborhoods</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="n">centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">neighborhoods</span><span class="p">]</span>
        <span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">radius</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">neighborhoods</span><span class="p">]</span>

        <span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">shortest_path_length</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">centers</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="kc">True</span> <span class="ow">in</span> <span class="p">[</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="k">for</span> <span class="n">d</span><span class="p">,</span><span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">radii</span><span class="p">)])</span>

    <span class="k">if</span> <span class="n">show_cast</span><span class="p">:</span>
        <span class="n">to_display</span> <span class="o">=</span> <span class="n">cast_nodes</span>

    <span class="k">if</span> <span class="n">neighborhoods</span><span class="p">:</span>
        <span class="n">to_display</span> <span class="o">=</span> <span class="n">in_neighborhoods</span>

    <span class="n">ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">to_display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">n</span><span class="p">)]</span>

    <span class="n">node_labels</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">labels</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;no candidate names assigned&quot;</span><span class="p">)</span>
        <span class="n">node_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_cands</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="n">to_display</span><span class="p">)</span>

    <span class="n">subgraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span>

    <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">subgraph</span><span class="p">)</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">subgraph</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="p">,</span> 
                     <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">node_labels</span><span class="p">)</span>

    <span class="c1"># handles labels overlapping with margins</span>
    <span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>
    <span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>
    <span class="n">x_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span>
    <span class="n">y_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x_min</span> <span class="o">-</span> <span class="n">x_margin</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">+</span> <span class="n">x_margin</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">y_min</span> <span class="o">-</span> <span class="n">y_margin</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="n">y_margin</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.ballot_graph.BallotGraph.fix_short_ballot" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fix_short_ballot</span><span class="p">(</span><span class="n">ballot</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span></code>

<a href="#votekit.graphs.ballot_graph.BallotGraph.fix_short_ballot" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Appends short ballots of n-1 length to add to BallotGraph</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix_short_ballot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ballot</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">candidates</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends short ballots of n-1 length to add to BallotGraph</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ballot</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">ballot</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.ballot_graph.BallotGraph.from_profile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">fix_short</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#votekit.graphs.ballot_graph.BallotGraph.from_profile" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Updates existing graph based on cast ballots from a PreferenceProfile,
or creates graph based on PreferenceProfile</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>PreferenceProfile assigned to graph</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="networkx.Graph">Graph</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Graph based on PreferenceProfile, 'cast' node attribute indicates
    ballots cast in PreferenceProfile</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">from_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
    <span class="n">fix_short</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates existing graph based on cast ballots from a PreferenceProfile,</span>
<span class="sd">    or creates graph based on PreferenceProfile</span>

<span class="sd">    Args:</span>
<span class="sd">        profile: PreferenceProfile assigned to graph</span>


<span class="sd">    Returns:</span>
<span class="sd">        Graph based on PreferenceProfile, &#39;cast&#39; node attribute indicates</span>
<span class="sd">                ballots cast in PreferenceProfile</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_voters</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_cands</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span> <span class="o">=</span> <span class="p">{</span><span class="n">ballot</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="n">ballot_node</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;ballots must be cleaned to resolve ties&quot;</span>
                <span class="p">)</span>  <span class="c1"># still unsure about ties</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">position</span><span class="p">:</span>
                <span class="n">ballot_node</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span><span class="p">[</span><span class="n">cand</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">fix_short</span><span class="p">:</span>
            <span class="n">ballot_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fix_short_ballot</span><span class="p">(</span>
                <span class="n">ballot_node</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cand_num</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)][</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)][</span><span class="s2">&quot;cast&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node_weights</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot_node</span><span class="p">)]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.ballot_graph.BallotGraph.label_cands" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">label_cands</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">to_display</span><span class="o">=</span><span class="n">all_nodes</span><span class="p">)</span></code>

<a href="#votekit.graphs.ballot_graph.BallotGraph.label_cands" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Assigns candidate labels to ballot graph for plotting</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>to_display</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Boolean callable that takes in a graph and node 
        returns True if node  should be displayed</p>
            </div>
          </td>
          <td>
                <code><span title="votekit.graphs.ballot_graph.all_nodes">all_nodes</span></code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/ballot_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">label_cands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candidates</span><span class="p">,</span>
                <span class="n">to_display</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">all_nodes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assigns candidate labels to ballot graph for plotting</span>

<span class="sd">    Args:</span>
<span class="sd">        to_display: a Boolean callable that takes in a graph and node </span>
<span class="sd">                    returns True if node  should be displayed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">candidate_numbers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_cands</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">candidates</span><span class="p">))</span>

    <span class="n">cand_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">candidate_numbers</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

    <span class="n">cand_labels</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
            <span class="n">ballot</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
                <span class="n">ballot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand_dict</span><span class="p">[</span><span class="n">num</span><span class="p">])</span>

            <span class="c1"># label the ballot and give the number of votes</span>
            <span class="n">cand_labels</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ballot</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;: &quot;</span> <span class="o">+</span> \
                            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;weight&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">cand_labels</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph" class="doc doc-heading">
          <code>PairwiseComparisonGraph</code>


<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.graphs.base_graph.Graph">Graph</span></code></p>

  
      <p>Class to constructe Pairwise Comparison graph where nodes are candidates
and edges are pairwise preferences</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   profile to construction graph from</p>
<p><code>ballot_length</code>
:   (Optional) max length of ballot, if None longest possible ballot </p>
<div class="highlight"><pre><span></span><code>lenth is assigned
</code></pre></div>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PairwiseComparisonGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to constructe Pairwise Comparison graph where nodes are candidates</span>
<span class="sd">    and edges are pairwise preferences</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   profile to construction graph from</span>

<span class="sd">    `ballot_length`</span>
<span class="sd">    :   (Optional) max length of ballot, if None longest possible ballot \n</span>
<span class="sd">        lenth is assigned</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">ballot_length</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span> <span class="o">=</span> <span class="n">ballot_length</span>
        <span class="k">if</span> <span class="n">ballot_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">())</span>
        <span class="n">full_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_fill</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">full_profile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pairwise_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_pairwise_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pairwise_graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_graph</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">ballot_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">ballot_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fills incomplete ballots for pairwise comparison</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cand_list</span> <span class="o">=</span> <span class="p">[{</span><span class="n">cand</span><span class="p">}</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()]</span>
        <span class="n">updated_ballot_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ballot_length</span><span class="p">:</span>
                <span class="n">missing_cands</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">cand</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">cand_list</span> <span class="k">if</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
                <span class="p">]</span>
                <span class="n">missing_cands_perms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="n">permutations</span><span class="p">(</span><span class="n">missing_cands</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_cands</span><span class="p">))</span>
                <span class="p">)</span>
                <span class="n">frac_freq</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">missing_cands_perms</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">missing_cands_perms</span><span class="p">:</span>
                    <span class="n">updated_rank</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span>
                    <span class="n">updated_ballot</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span>
                        <span class="n">ranking</span><span class="o">=</span><span class="n">updated_rank</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">frac_freq</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">updated_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_ballot</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">updated_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">updated_ballot_list</span><span class="p">)</span>

    <span class="c1"># Helper functions to make pairwise comparison graph</span>
    <span class="k">def</span> <span class="nf">head2head_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cand1</span><span class="p">,</span> <span class="n">cand2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fraction</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Counts head to head comparisons between two candidates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ballots_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots_list</span><span class="p">:</span>
            <span class="n">rank_list</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">rank_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cand1</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
                    <span class="k">break</span>
                <span class="k">elif</span> <span class="n">cand2</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compute_pairwise_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs dictionary where keys are tuples (cand_a, cand_b) containing</span>
<span class="sd">        two candidates and values is the frequency cand_a is preferred to</span>
<span class="sd">        cand_b</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pairwise_dict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># {(cand_a, cand_b): freq cand_a is preferred over cand_b}</span>
        <span class="n">cand_pairs</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">cand_pairs</span><span class="p">:</span>
            <span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span> <span class="o">=</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">head_2_head_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">),</span>
                <span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">),</span>
            <span class="p">}</span>
            <span class="n">max_pair</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">head_2_head_dict</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">head_2_head_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">pairwise_dict</span><span class="p">[</span><span class="n">max_pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">)</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">pairwise_dict</span>

    <span class="k">def</span> <span class="nf">build_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pairwise_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pairwise_dict</span><span class="p">[</span><span class="n">e</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">G</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws pairwise comparison graph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">G</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pairwise_graph</span>

        <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
        <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span>
            <span class="n">G</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">node_color</span><span class="o">=</span><span class="s2">&quot;skyblue&quot;</span><span class="p">,</span>
            <span class="n">edgelist</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span>
            <span class="n">G</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">edgelist</span><span class="o">=</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
            <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span>
            <span class="n">arrows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">node_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">arrowsize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">edge_labels</span> <span class="o">=</span> <span class="p">{(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span> <span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">()}</span>
        <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span>
            <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="n">edge_labels</span><span class="p">,</span> <span class="n">label_pos</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="c1"># Out stuff</span>
        <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># More complicated Requests</span>
    <span class="k">def</span> <span class="nf">has_condorcet</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if graph has a condorcet winner</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if condorcet winner exists, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">dominating_tiers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds dominating tiers within an election</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of dominating tiers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">beat_set_size_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cand</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">):</span>
            <span class="n">beat_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">other_cand</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">nx</span><span class="o">.</span><span class="n">has_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pairwise_graph</span><span class="p">,</span> <span class="n">cand</span><span class="p">,</span> <span class="n">other_cand</span><span class="p">):</span>
                        <span class="n">beat_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other_cand</span><span class="p">)</span>
            <span class="n">beat_set_size_dict</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">beat_set</span><span class="p">)</span>

        <span class="c1"># We want to return candidates sorted and grouped by beat set size</span>
        <span class="n">tier_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">beat_set_size_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">}</span>
        <span class="n">tier_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">tier_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">tier_list</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.ballot_fill" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">ballot_fill</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_length</span><span class="p">)</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.ballot_fill" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Fills incomplete ballots for pairwise comparison</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ballot_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">ballot_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fills incomplete ballots for pairwise comparison</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cand_list</span> <span class="o">=</span> <span class="p">[{</span><span class="n">cand</span><span class="p">}</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()]</span>
    <span class="n">updated_ballot_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ballot_length</span><span class="p">:</span>
            <span class="n">missing_cands</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">cand</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">cand_list</span> <span class="k">if</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
            <span class="p">]</span>
            <span class="n">missing_cands_perms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="n">permutations</span><span class="p">(</span><span class="n">missing_cands</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_cands</span><span class="p">))</span>
            <span class="p">)</span>
            <span class="n">frac_freq</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">missing_cands_perms</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">missing_cands_perms</span><span class="p">:</span>
                <span class="n">updated_rank</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span>
                <span class="n">updated_ballot</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span>
                    <span class="n">ranking</span><span class="o">=</span><span class="n">updated_rank</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">frac_freq</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">updated_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_ballot</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">updated_ballot_list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.compute_pairwise_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">compute_pairwise_dict</span><span class="p">()</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.compute_pairwise_dict" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Constructs dictionary where keys are tuples (cand_a, cand_b) containing
two candidates and values is the frequency cand_a is preferred to
cand_b</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">compute_pairwise_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs dictionary where keys are tuples (cand_a, cand_b) containing</span>
<span class="sd">    two candidates and values is the frequency cand_a is preferred to</span>
<span class="sd">    cand_b</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pairwise_dict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># {(cand_a, cand_b): freq cand_a is preferred over cand_b}</span>
    <span class="n">cand_pairs</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">cand_pairs</span><span class="p">:</span>
        <span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span> <span class="o">=</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">head_2_head_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">),</span>
            <span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">max_pair</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">head_2_head_dict</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">head_2_head_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="n">pairwise_dict</span><span class="p">[</span><span class="n">max_pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_a</span><span class="p">,</span> <span class="n">cand_b</span><span class="p">)</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand_b</span><span class="p">,</span> <span class="n">cand_a</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">pairwise_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.dominating_tiers" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">dominating_tiers</span><span class="p">()</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.dominating_tiers" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Finds dominating tiers within an election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[set]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of dominating tiers</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">dominating_tiers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds dominating tiers within an election</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of dominating tiers</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">beat_set_size_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cand</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">):</span>
        <span class="n">beat_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">other_cand</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">nx</span><span class="o">.</span><span class="n">has_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pairwise_graph</span><span class="p">,</span> <span class="n">cand</span><span class="p">,</span> <span class="n">other_cand</span><span class="p">):</span>
                    <span class="n">beat_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other_cand</span><span class="p">)</span>
        <span class="n">beat_set_size_dict</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">beat_set</span><span class="p">)</span>

    <span class="c1"># We want to return candidates sorted and grouped by beat set size</span>
    <span class="n">tier_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">beat_set_size_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">}</span>
    <span class="n">tier_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">tier_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">tier_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.draw" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">draw</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.draw" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Draws pairwise comparison graph</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draws pairwise comparison graph</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pairwise_graph</span>

    <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span>
        <span class="n">G</span><span class="p">,</span>
        <span class="n">pos</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">node_size</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">node_color</span><span class="o">=</span><span class="s2">&quot;skyblue&quot;</span><span class="p">,</span>
        <span class="n">edgelist</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span>
        <span class="n">G</span><span class="p">,</span>
        <span class="n">pos</span><span class="p">,</span>
        <span class="n">edgelist</span><span class="o">=</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span>
        <span class="n">arrows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">node_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">arrowsize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">edge_labels</span> <span class="o">=</span> <span class="p">{(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span> <span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">()}</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span>
        <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="n">edge_labels</span><span class="p">,</span> <span class="n">label_pos</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span>
    <span class="c1"># Out stuff</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.has_condorcet" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">has_condorcet</span><span class="p">()</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.has_condorcet" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Checks if graph has a condorcet winner</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if condorcet winner exists, False otherwise</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_condorcet</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if graph has a condorcet winner</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if condorcet winner exists, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.head2head_count" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">head2head_count</span><span class="p">(</span><span class="n">cand1</span><span class="p">,</span> <span class="n">cand2</span><span class="p">)</span></code>

<a href="#votekit.graphs.pairwise_comparison_graph.PairwiseComparisonGraph.head2head_count" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Counts head to head comparisons between two candidates</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/graphs/pairwise_comparison_graph.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">head2head_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cand1</span><span class="p">,</span> <span class="n">cand2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fraction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counts head to head comparisons between two candidates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ballots_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots_list</span><span class="p">:</span>
        <span class="n">rank_list</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">rank_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cand1</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cand2</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div><h2 id="cvr-loaders">CVR Loaders<a class="headerlink" href="#cvr-loaders" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.cvr_loaders.load_blt" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_blt</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span></code>

<a href="#votekit.cvr_loaders.load_blt" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a blt file path, loads cvr (blt is text-like format used for scottish election data)</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fpath</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path to cvr file</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>FileNotFoundError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If fpath is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.errors.EmptyDataError">EmptyDataError</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If dataset is empty</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.errors.DataError">DataError</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If there is missing or incorrect metadata or candidate data</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A preference schedule representing all the ballots in the elction</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seats in the election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cvr_loaders.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_blt</span><span class="p">(</span><span class="n">fpath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PreferenceProfile</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a blt file path, loads cvr (blt is text-like format used for scottish election data)</span>

<span class="sd">    Args:</span>
<span class="sd">        fpath: Path to cvr file</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If fpath is invalid</span>
<span class="sd">        EmptyDataError: If dataset is empty</span>
<span class="sd">        DataError: If there is missing or incorrect metadata or candidate data</span>

<span class="sd">    Returns:</span>
<span class="sd">        A preference schedule representing all the ballots in the elction</span>
<span class="sd">        Number of seats in the election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">name_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">numbers</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">cands_included</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fpath</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File with path </span><span class="si">{</span><span class="n">fpath</span><span class="si">}</span><span class="s2"> cannot be found&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EmptyDataError</span><span class="p">(</span><span class="s2">&quot;Dataset cannot be empty&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># first number is number of candidates, second is number of seats to elect</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">DataError</span><span class="p">(</span>
                        <span class="s2">&quot;metadata (first line) should have two parameters&quot;</span>
                        <span class="s2">&quot; (number of candidates, number of seats)&quot;</span>
                    <span class="p">)</span>
                <span class="n">seats</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># read in ballots, cleaning out rankings labeled &#39;0&#39; (designating end of line)</span>
            <span class="k">elif</span> <span class="n">numbers</span><span class="p">:</span>
                <span class="n">ballot</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">vote</span><span class="p">)</span> <span class="k">for</span> <span class="n">vote</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)]</span>
                <span class="n">num_votes</span> <span class="o">=</span> <span class="n">ballot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1"># ballots terminate with a single row with the character &#39;0&#39;</span>
                <span class="k">if</span> <span class="n">num_votes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">numbers</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ranking</span> <span class="o">=</span> <span class="p">[</span><span class="n">rank</span> <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">ballot</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">ranking</span><span class="p">,</span> <span class="n">num_votes</span><span class="p">)</span>
                    <span class="n">ballots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>  <span class="c1"># this is converted to the PP format later</span>
            <span class="c1"># read in candidates</span>
            <span class="k">elif</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                <span class="n">cands_included</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">name_parts</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="n">first_name</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name_parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">last_name</span> <span class="o">=</span> <span class="n">name_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">party</span> <span class="o">=</span> <span class="n">name_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">party</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="n">metadata</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">err_message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Number of candidates listed, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; differs from&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;number of candidates recorded in metadata, </span><span class="si">{</span><span class="n">metadata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">DataError</span><span class="p">(</span><span class="n">err_message</span><span class="p">)</span>
                <span class="c1"># read in election location (do we need this?)</span>
                <span class="c1"># location = s.strip(&quot;\&quot;&quot;)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">cands_included</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">DataError</span><span class="p">(</span><span class="s2">&quot;Candidates missing from file&quot;</span><span class="p">)</span>
                <span class="c1"># map candidate numbers onto their names and convert ballots to PP format</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">names</span><span class="p">):</span>
                    <span class="n">name_map</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
                <span class="n">clean_ballots</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">Ballot</span><span class="p">(</span>
                        <span class="n">ranking</span><span class="o">=</span><span class="p">[{</span><span class="n">name_map</span><span class="p">[</span><span class="n">cand</span><span class="p">]}</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ballot</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
                        <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ballot</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span>
                <span class="p">]</span>

        <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">clean_ballots</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="n">names</span><span class="p">),</span> <span class="n">seats</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.cvr_loaders.load_csv" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="n">rank_cols</span><span class="o">=</span><span class="p">[],</span> <span class="o">*</span><span class="p">,</span> <span class="n">weight_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">id_col</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#votekit.cvr_loaders.load_csv" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a file path, loads cast vote records (cvr) with ranks as columns and voters as rows
(empty cells are treated as None)</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fpath</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path to cvr file</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>rank_cols</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of column indexes that contain rankings, indexing starts from 0,
        in order from top to bottom rank.
        Default implies that all columns contain rankings.</p>
            </div>
          </td>
          <td>
                <code>[]</code>
          </td>
        </tr>
        <tr>
          <td><code>weight_col</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column position for ballot weights
if parsing Scottish elections like cvrs</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>delimiter</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The character that breaks up rows</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>id_col</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Index for the column with voter ids</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>FileNotFoundError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If fpath is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.errors.EmptyDataError">EmptyDataError</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If dataset is empty</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the voter id column has missing values</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.errors.DataError">DataError</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the voter id column has duplicate values</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A preference profile that represents all the ballots in the election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cvr_loaders.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_csv</span><span class="p">(</span>
    <span class="n">fpath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">rank_cols</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">weight_col</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">id_col</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a file path, loads cast vote records (cvr) with ranks as columns and voters as rows</span>
<span class="sd">    (empty cells are treated as None)</span>

<span class="sd">    Args:</span>
<span class="sd">        fpath: Path to cvr file</span>
<span class="sd">        rank_cols: list of column indexes that contain rankings, indexing starts from 0,</span>
<span class="sd">                    in order from top to bottom rank.</span>
<span class="sd">                    Default implies that all columns contain rankings.</span>
<span class="sd">        weight_col: The column position for ballot weights</span>
<span class="sd">            if parsing Scottish elections like cvrs</span>
<span class="sd">        delimiter: The character that breaks up rows</span>
<span class="sd">        id_col: Index for the column with voter ids</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If fpath is invalid</span>
<span class="sd">        EmptyDataError: If dataset is empty</span>
<span class="sd">        ValueError: If the voter id column has missing values</span>
<span class="sd">        DataError: If the voter id column has duplicate values</span>

<span class="sd">    Returns:</span>
<span class="sd">        A preference profile that represents all the ballots in the election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fpath</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File with path </span><span class="si">{</span><span class="n">fpath</span><span class="si">}</span><span class="s2"> cannot be found&quot;</span><span class="p">)</span>

    <span class="n">cvr_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
        <span class="n">cvr_path</span><span class="p">,</span>
        <span class="n">on_bad_lines</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span>
        <span class="n">index_col</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EmptyDataError</span><span class="p">(</span><span class="s2">&quot;Dataset cannot be empty&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">id_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">id_col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing value(s) in column at index </span><span class="si">{</span><span class="n">id_col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">id_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">id_col</span><span class="p">]</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DataError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate value(s) in column at index </span><span class="si">{</span><span class="n">id_col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">rank_cols</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">id_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">rank_cols</span><span class="o">+</span><span class="p">[</span><span class="n">id_col</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">rank_cols</span><span class="p">]</span>

    <span class="n">ranks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">id_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ranks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">id_col</span><span class="p">])</span>
    <span class="n">grouped</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">ranks</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">grouped</span><span class="p">:</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="p">[{</span><span class="kc">None</span><span class="p">}</span> <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span><span class="n">c</span><span class="p">}</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">group</span><span class="p">]</span>


        <span class="n">voters</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">id_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">voters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">group_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">id_col</span><span class="p">])</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_df</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">weight_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">group_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">weight_col</span><span class="p">])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">weight</span><span class="p">),</span> <span class="n">voters</span><span class="o">=</span><span class="n">voters</span><span class="p">)</span>
        <span class="n">ballots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballots</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h2 id="ballot-generators">Ballot Generators<a class="headerlink" href="#ballot-generators" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.BallotGenerator" class="doc doc-heading">
          <code>BallotGenerator</code>


<a href="#votekit.ballot_generator.BallotGenerator" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Base class for ballot generation models that use the candidate simplex
(e.g. PlackettLuce, BradleyTerry, etc.)</p>
<p><strong>Attributes</strong></p>
<p><code>candidates</code>
:   list of candidates in the election</p>
<p><code>ballot_length</code>
:   (Optional) length of ballots to generate. Defaults to the length of
    <code>candidates</code></p>
<p><code>pref_interval_by_bloc</code>
:   dictionary mapping of slate to preference interval
    (ex. {race: {candidate : interval length}})</p>
<p><code>bloc_voter_prop</code>
:   dictionary mapping of slate to voter proportions
    (ex. {race: voter proportion}). Defaults to None</p>
<details class="note" open="open">
<summary>Note</summary>
<ul>
<li>Voter proportion for blocs must sum to 1</li>
<li>Preference interval for candidates must sum to 1</li>
<li>Slates and blocs must be equal</li>
</ul>
</details>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BallotGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for ballot generation models that use the candidate simplex</span>
<span class="sd">    (e.g. PlackettLuce, BradleyTerry, etc.)</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `candidates`</span>
<span class="sd">    :   list of candidates in the election</span>

<span class="sd">    `ballot_length`</span>
<span class="sd">    :   (Optional) length of ballots to generate. Defaults to the length of</span>
<span class="sd">        `candidates`</span>

<span class="sd">    `pref_interval_by_bloc`</span>
<span class="sd">    :   dictionary mapping of slate to preference interval</span>
<span class="sd">        (ex. {race: {candidate : interval length}})</span>

<span class="sd">    `bloc_voter_prop`</span>
<span class="sd">    :   dictionary mapping of slate to voter proportions</span>
<span class="sd">        (ex. {race: voter proportion}). Defaults to None</span>

<span class="sd">    ???+ note</span>

<span class="sd">        * Voter proportion for blocs must sum to 1</span>
<span class="sd">        * Preference interval for candidates must sum to 1</span>
<span class="sd">        * Slates and blocs must be equal</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">candidates</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">ballot_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pref_interval_by_bloc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bloc_voter_prop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ballot_length</span> <span class="k">if</span> <span class="n">ballot_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span> <span class="o">=</span> <span class="n">candidates</span>

        <span class="k">if</span> <span class="n">bloc_voter_prop</span> <span class="ow">and</span> <span class="n">pref_interval_by_bloc</span><span class="p">:</span>  <span class="c1"># PL, BT, AC, CS</span>
            <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voter proportion for blocs must sum to 1&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">pref_interval_by_bloc</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Preference interval for candidates must sum to 1&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">pref_interval_by_bloc</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;slates and blocs are not the same&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pref_interval_by_bloc</span> <span class="o">=</span> <span class="n">pref_interval_by_bloc</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span> <span class="o">=</span> <span class="n">bloc_voter_prop</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_params</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">slate_to_candidates</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">bloc_voter_prop</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">cohesion</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">alphas</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="o">**</span><span class="n">data</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a Ballot Generator by constructing a preference interval</span>
<span class="sd">        from parameters; the prior parameters (if inputted) will be overwritten</span>

<span class="sd">        Args:</span>
<span class="sd">            slate_to_candidate (dict): a mapping of slate to candidates</span>
<span class="sd">                (ex. {race: [candidate]})</span>
<span class="sd">            bloc_voter_prop (dict): a mapping of the percentage of total voters</span>
<span class="sd">                 per bloc (ex. {race: 0.5})</span>
<span class="sd">            cohesion (dict): cohension factor for each bloc</span>
<span class="sd">            alphas (dict): alpha for the dirchlet distribution of each bloc</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the voter proportion for blocs don&#39;t sum to 1</span>
<span class="sd">            ValueError: slates and blocs are not the same</span>

<span class="sd">        Returns:</span>
<span class="sd">            BallotGenerator: initialized ballot generator</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;bloc proportions (</span><span class="si">{</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="si">}</span><span class="s2">) do not equal 1&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">slate_to_candidates</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;slates and blocs are not the same&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_construct_preference_interval</span><span class="p">(</span>
            <span class="n">alphas</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">cohesion</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">bloc</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">slate_to_cands</span><span class="p">:</span> <span class="nb">dict</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="n">intervals</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">alpha</span> <span class="ow">in</span> <span class="n">alphas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">num_cands</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">slate_to_cands</span><span class="p">[</span><span class="n">group</span><span class="p">])</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="p">[</span><span class="n">alpha</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_cands</span>
                <span class="n">probs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">prob</span><span class="p">,</span> <span class="n">cand</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">slate_to_cands</span><span class="p">[</span><span class="n">group</span><span class="p">]):</span>
                    <span class="k">if</span> <span class="n">group</span> <span class="o">==</span> <span class="n">bloc</span><span class="p">:</span>  <span class="c1"># e.g W for W cands</span>
                        <span class="n">pi</span> <span class="o">=</span> <span class="n">cohesion</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># e.g W for POC cands</span>
                        <span class="n">pi</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">cohesion</span>
                    <span class="n">intervals</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">prob</span>

            <span class="k">return</span> <span class="n">intervals</span>

        <span class="n">interval_by_bloc</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="n">bloc_voter_prop</span><span class="p">:</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">_construct_preference_interval</span><span class="p">(</span>
                <span class="n">alphas</span><span class="p">[</span><span class="n">bloc</span><span class="p">],</span> <span class="n">cohesion</span><span class="p">[</span><span class="n">bloc</span><span class="p">],</span> <span class="n">bloc</span><span class="p">,</span> <span class="n">slate_to_candidates</span>
            <span class="p">)</span>
            <span class="n">interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval</span>

        <span class="k">if</span> <span class="s2">&quot;candidates&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">cands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="p">{</span><span class="n">cand</span> <span class="k">for</span> <span class="n">cands</span> <span class="ow">in</span> <span class="n">slate_to_candidates</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">cands</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;candidates&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cands</span>

        <span class="k">if</span> <span class="s2">&quot;pref_interval_by_bloc&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;pref_interval_by_bloc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval_by_bloc</span>

        <span class="k">if</span> <span class="s2">&quot;bloc_voter_prop&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;bloc_voter_prop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bloc_voter_prop</span>

        <span class="n">generator</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">generator</span><span class="p">,</span> <span class="p">(</span><span class="n">AlternatingCrossover</span><span class="p">,</span> <span class="n">CambridgeSampler</span><span class="p">)):</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">slate_to_candidates</span> <span class="o">=</span> <span class="n">slate_to_candidates</span>

        <span class="k">return</span> <span class="n">generator</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a `PreferenceProfile`</span>

<span class="sd">        Args:</span>
<span class="sd">            number_of_ballots (int): number of ballots to generate</span>
<span class="sd">        Returns:</span>
<span class="sd">            PreferenceProfile: a generated `PreferenceProfile`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">round_num</span><span class="p">(</span><span class="n">num</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        rounds up or down a float randomly</span>

<span class="sd">        Args:</span>
<span class="sd">            num (float): number to round</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: a whole number</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">if</span> <span class="n">rand</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ballot_pool_to_profile</span><span class="p">(</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a list of ballots and candidates, convert them into a `PreferenceProfile`</span>

<span class="sd">        Args:</span>
<span class="sd">            ballot_pool (list of tuple): a list of ballots, with tuple as their ranking</span>
<span class="sd">            candidates (list): a list of candidates</span>

<span class="sd">        Returns:</span>
<span class="sd">            PreferenceProfile: a preference profile representing the ballots in the election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking_counts</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ballot_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">ballot_pool</span><span class="p">:</span>
            <span class="n">tuple_rank</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
            <span class="n">ranking_counts</span><span class="p">[</span><span class="n">tuple_rank</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ranking_counts</span><span class="p">[</span><span class="n">tuple_rank</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">tuple_rank</span> <span class="ow">in</span> <span class="n">ranking_counts</span> <span class="k">else</span> <span class="mi">1</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">ranking</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">ranking_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">([</span><span class="n">cand</span><span class="p">])</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>
            <span class="n">ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballot_list</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="n">candidates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotGenerator.ballot_pool_to_profile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">ballot_pool_to_profile</span><span class="p">(</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotGenerator.ballot_pool_to_profile" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given a list of ballots and candidates, convert them into a <code>PreferenceProfile</code></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ballot_pool</code></td>
          <td>
                <code>list of tuple</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of ballots, with tuple as their ranking</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>candidates</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of candidates</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PreferenceProfile</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile representing the ballots in the election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ballot_pool_to_profile</span><span class="p">(</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a list of ballots and candidates, convert them into a `PreferenceProfile`</span>

<span class="sd">    Args:</span>
<span class="sd">        ballot_pool (list of tuple): a list of ballots, with tuple as their ranking</span>
<span class="sd">        candidates (list): a list of candidates</span>

<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a preference profile representing the ballots in the election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ranking_counts</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">ballot_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">ballot_pool</span><span class="p">:</span>
        <span class="n">tuple_rank</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">ranking_counts</span><span class="p">[</span><span class="n">tuple_rank</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ranking_counts</span><span class="p">[</span><span class="n">tuple_rank</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">tuple_rank</span> <span class="ow">in</span> <span class="n">ranking_counts</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">ranking</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">ranking_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">([</span><span class="n">cand</span><span class="p">])</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>
        <span class="n">ballot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballot_list</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="n">candidates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotGenerator.from_params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_params</span><span class="p">(</span><span class="n">slate_to_candidates</span><span class="p">,</span> <span class="n">bloc_voter_prop</span><span class="p">,</span> <span class="n">cohesion</span><span class="p">,</span> <span class="n">alphas</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotGenerator.from_params" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initializes a Ballot Generator by constructing a preference interval
from parameters; the prior parameters (if inputted) will be overwritten</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>slate_to_candidate</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a mapping of slate to candidates
(ex. {race: [candidate]})</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bloc_voter_prop</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a mapping of the percentage of total voters
 per bloc (ex. {race: 0.5})</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cohesion</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>cohension factor for each bloc</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>alphas</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>alpha for the dirchlet distribution of each bloc</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the voter proportion for blocs don't sum to 1</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>slates and blocs are not the same</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>BallotGenerator</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>initialized ballot generator</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_params</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">slate_to_candidates</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">bloc_voter_prop</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">cohesion</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">alphas</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="o">**</span><span class="n">data</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes a Ballot Generator by constructing a preference interval</span>
<span class="sd">    from parameters; the prior parameters (if inputted) will be overwritten</span>

<span class="sd">    Args:</span>
<span class="sd">        slate_to_candidate (dict): a mapping of slate to candidates</span>
<span class="sd">            (ex. {race: [candidate]})</span>
<span class="sd">        bloc_voter_prop (dict): a mapping of the percentage of total voters</span>
<span class="sd">             per bloc (ex. {race: 0.5})</span>
<span class="sd">        cohesion (dict): cohension factor for each bloc</span>
<span class="sd">        alphas (dict): alpha for the dirchlet distribution of each bloc</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if the voter proportion for blocs don&#39;t sum to 1</span>
<span class="sd">        ValueError: slates and blocs are not the same</span>

<span class="sd">    Returns:</span>
<span class="sd">        BallotGenerator: initialized ballot generator</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;bloc proportions (</span><span class="si">{</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="si">}</span><span class="s2">) do not equal 1&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">slate_to_candidates</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;slates and blocs are not the same&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_construct_preference_interval</span><span class="p">(</span>
        <span class="n">alphas</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">cohesion</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">bloc</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">slate_to_cands</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">alpha</span> <span class="ow">in</span> <span class="n">alphas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num_cands</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">slate_to_cands</span><span class="p">[</span><span class="n">group</span><span class="p">])</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="p">[</span><span class="n">alpha</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_cands</span>
            <span class="n">probs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">prob</span><span class="p">,</span> <span class="n">cand</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">slate_to_cands</span><span class="p">[</span><span class="n">group</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">group</span> <span class="o">==</span> <span class="n">bloc</span><span class="p">:</span>  <span class="c1"># e.g W for W cands</span>
                    <span class="n">pi</span> <span class="o">=</span> <span class="n">cohesion</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># e.g W for POC cands</span>
                    <span class="n">pi</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">cohesion</span>
                <span class="n">intervals</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">prob</span>

        <span class="k">return</span> <span class="n">intervals</span>

    <span class="n">interval_by_bloc</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="n">bloc_voter_prop</span><span class="p">:</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="n">_construct_preference_interval</span><span class="p">(</span>
            <span class="n">alphas</span><span class="p">[</span><span class="n">bloc</span><span class="p">],</span> <span class="n">cohesion</span><span class="p">[</span><span class="n">bloc</span><span class="p">],</span> <span class="n">bloc</span><span class="p">,</span> <span class="n">slate_to_candidates</span>
        <span class="p">)</span>
        <span class="n">interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval</span>

    <span class="k">if</span> <span class="s2">&quot;candidates&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">cands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="p">{</span><span class="n">cand</span> <span class="k">for</span> <span class="n">cands</span> <span class="ow">in</span> <span class="n">slate_to_candidates</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">cands</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;candidates&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cands</span>

    <span class="k">if</span> <span class="s2">&quot;pref_interval_by_bloc&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;pref_interval_by_bloc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval_by_bloc</span>

    <span class="k">if</span> <span class="s2">&quot;bloc_voter_prop&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;bloc_voter_prop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bloc_voter_prop</span>

    <span class="n">generator</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">generator</span><span class="p">,</span> <span class="p">(</span><span class="n">AlternatingCrossover</span><span class="p">,</span> <span class="n">CambridgeSampler</span><span class="p">)):</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">slate_to_candidates</span> <span class="o">=</span> <span class="n">slate_to_candidates</span>

    <span class="k">return</span> <span class="n">generator</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotGenerator.generate_profile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">generate_profile</span><span class="p">(</span><span class="n">number_of_ballots</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotGenerator.generate_profile" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Generates a <code>PreferenceProfile</code></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>number_of_ballots</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of ballots to generate</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    PreferenceProfile: a generated <code>PreferenceProfile</code></p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a `PreferenceProfile`</span>

<span class="sd">    Args:</span>
<span class="sd">        number_of_ballots (int): number of ballots to generate</span>
<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a generated `PreferenceProfile`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotGenerator.round_num" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">round_num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotGenerator.round_num" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>rounds up or down a float randomly</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>num</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number to round</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>int</code></td>          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a whole number</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">round_num</span><span class="p">(</span><span class="n">num</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    rounds up or down a float randomly</span>

<span class="sd">    Args:</span>
<span class="sd">        num (float): number to round</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: a whole number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">if</span> <span class="n">rand</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.BallotSimplex" class="doc doc-heading">
          <code>BallotSimplex</code>


<a href="#votekit.ballot_generator.BallotSimplex" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>Base class for ballot generation models that use the ballot simplex
(e.g. ImpartialCulture, ImpartialAnonymousCulture)</p>
<p><strong>Attributes</strong></p>
<p><code>alpha</code>
:   (float) alpha parameter for ballot simplex. Defaults to None</p>
<p><code>point</code>
:   dictionary representing a point in the ballot simplex with candidate as
    keys and electoral support as values. Defaults to None</p>
<details class="note" open="open">
<summary>Note</summary>
<p>Point and alpha arguments must be included to intialize</p>
</details>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BallotSimplex</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for ballot generation models that use the ballot simplex</span>
<span class="sd">    (e.g. ImpartialCulture, ImpartialAnonymousCulture)</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `alpha`</span>
<span class="sd">    :   (float) alpha parameter for ballot simplex. Defaults to None</span>

<span class="sd">    `point`</span>
<span class="sd">    :   dictionary representing a point in the ballot simplex with candidate as</span>
<span class="sd">        keys and electoral support as values. Defaults to None</span>

<span class="sd">    ???+ note</span>

<span class="sd">        Point and alpha arguments must be included to intialize</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">point</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;point or alpha must be initialized&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1e20</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1e-10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">point</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_point</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a Ballot Simplex model from a point in the dirichlet distribution</span>

<span class="sd">        Args:</span>
<span class="sd">            point (dict): a mapping of candidate to candidate support</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the candidate support does not sum to 1</span>

<span class="sd">        Returns:</span>
<span class="sd">            BallotSimplex: initialized from point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;probability distribution from point (</span><span class="si">{</span><span class="n">point</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="si">}</span><span class="s2">) does not sum to 1&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_alpha</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a Ballot Simplex model from an alpha value for the dirichlet</span>
<span class="sd">        distribution</span>

<span class="sd">        Args:</span>
<span class="sd">            alpha (float): an alpha parameter for the dirichlet distribution</span>

<span class="sd">        Returns:</span>
<span class="sd">            BallotSimplex: initialized from alpha</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
        <span class="n">perm_set</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span><span class="p">)</span>

        <span class="n">perm_rankings</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">perm_set</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">draw_probabilities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">perm_rankings</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">:</span>
            <span class="c1"># calculates probabilities for each ranking</span>
            <span class="c1"># using probability distribution for candidate support</span>
            <span class="n">draw_probabilities</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">reduce</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">prod</span><span class="p">,</span> <span class="n">cand</span><span class="p">:</span> <span class="n">prod</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="n">ranking</span><span class="p">,</span>
                    <span class="mf">1.0</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">perm_rankings</span>
            <span class="p">]</span>
            <span class="n">draw_probabilities</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">prob</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">draw_probabilities</span><span class="p">)</span> <span class="k">for</span> <span class="n">prob</span> <span class="ow">in</span> <span class="n">draw_probabilities</span>
            <span class="p">]</span>

        <span class="n">ballot_pool</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_ballots</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">perm_rankings</span><span class="p">)),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">draw_probabilities</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">perm_rankings</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotSimplex.from_alpha" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotSimplex.from_alpha" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initializes a Ballot Simplex model from an alpha value for the dirichlet
distribution</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>alpha</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an alpha parameter for the dirichlet distribution</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>BallotSimplex</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>initialized from alpha</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_alpha</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes a Ballot Simplex model from an alpha value for the dirichlet</span>
<span class="sd">    distribution</span>

<span class="sd">    Args:</span>
<span class="sd">        alpha (float): an alpha parameter for the dirichlet distribution</span>

<span class="sd">    Returns:</span>
<span class="sd">        BallotSimplex: initialized from alpha</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.ballot_generator.BallotSimplex.from_point" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#votekit.ballot_generator.BallotSimplex.from_point" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initializes a Ballot Simplex model from a point in the dirichlet distribution</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>point</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a mapping of candidate to candidate support</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the candidate support does not sum to 1</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>BallotSimplex</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>initialized from point</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_point</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes a Ballot Simplex model from a point in the dirichlet distribution</span>

<span class="sd">    Args:</span>
<span class="sd">        point (dict): a mapping of candidate to candidate support</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if the candidate support does not sum to 1</span>

<span class="sd">    Returns:</span>
<span class="sd">        BallotSimplex: initialized from point</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;probability distribution from point (</span><span class="si">{</span><span class="n">point</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="si">}</span><span class="s2">) does not sum to 1&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.PlackettLuce" class="doc doc-heading">
          <code>PlackettLuce</code>


<a href="#votekit.ballot_generator.PlackettLuce" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>Class for generating ballots using a Plackett-Luce model</p>
<p><strong>Attributes</strong></p>
<p><code>pref_interval_by_bloc</code>
:   dictionary mapping of slate to preference interval
    (ex. {race: {candidate : interval length}})</p>
<p><code>bloc_voter_prop</code>
:   dictionary mapping of slate to voter proportions (ex. {race: voter proportion})</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotGenerator</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PlackettLuce</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for generating ballots using a Plackett-Luce model</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `pref_interval_by_bloc`</span>
<span class="sd">    :   dictionary mapping of slate to preference interval</span>
<span class="sd">        (ex. {race: {candidate : interval length}})</span>

<span class="sd">    `bloc_voter_prop`</span>
<span class="sd">    :   dictionary mapping of slate to voter proportions (ex. {race: voter proportion})</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotGenerator` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>

        <span class="c1"># Call the parent class&#39;s __init__ method to handle common parameters</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
        <span class="n">ballot_pool</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1"># number of voters in this bloc</span>
            <span class="n">num_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_num</span><span class="p">(</span><span class="n">number_of_ballots</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="p">[</span><span class="n">bloc</span><span class="p">])</span>
            <span class="n">pref_interval_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pref_interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>
            <span class="c1"># creates the interval of probabilities for candidates supported by this block</span>
            <span class="n">cand_support_vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">pref_interval_dict</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_ballots</span><span class="p">):</span>
                <span class="c1"># generates ranking based on probability distribution of candidate support</span>
                <span class="n">ballot</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span><span class="p">,</span>
                        <span class="n">p</span><span class="o">=</span><span class="n">cand_support_vec</span><span class="p">,</span>
                        <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>

        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span>
            <span class="n">ballot_pool</span><span class="o">=</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pp</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.BradleyTerry" class="doc doc-heading">
          <code>BradleyTerry</code>


<a href="#votekit.ballot_generator.BradleyTerry" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>Class for generating ballots useing a Bradley-Terry model</p>
<p><strong>Attributes</strong></p>
<p><code>pref_interval_by_bloc</code>
:   dictionary mapping of slate to preference interval
    (ex. {race: {candidate : interval length}})</p>
<p><code>bloc_voter_prop</code>
:   dictionary mapping of slate to voter proportions
    (ex. {race: voter proportion})</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotGenerator</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BradleyTerry</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for generating ballots useing a Bradley-Terry model</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `pref_interval_by_bloc`</span>
<span class="sd">    :   dictionary mapping of slate to preference interval</span>
<span class="sd">        (ex. {race: {candidate : interval length}})</span>

<span class="sd">    `bloc_voter_prop`</span>
<span class="sd">    :   dictionary mapping of slate to voter proportions</span>
<span class="sd">        (ex. {race: voter proportion})</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotGenerator` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>

        <span class="c1"># Call the parent class&#39;s __init__ method to handle common parameters</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_calc_prob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">permutations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">],</span> <span class="n">cand_support_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        given a list of rankings and the preference interval, \</span>
<span class="sd">        calculates the probability of observing each ranking</span>

<span class="sd">        Args:</span>
<span class="sd">            permutations (list[tuple]): a list of permuted rankings</span>
<span class="sd">            cand_support_dict (dict): a mapping from candidate to their \</span>
<span class="sd">            support (preference interval)</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: a mapping of the rankings to their probability</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking_to_prob</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">:</span>
            <span class="n">prob</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)):</span>
                <span class="n">cand_i</span> <span class="o">=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">greater_cand_support</span> <span class="o">=</span> <span class="n">cand_support_dict</span><span class="p">[</span><span class="n">cand_i</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)):</span>
                    <span class="n">cand_j</span> <span class="o">=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">cand_support</span> <span class="o">=</span> <span class="n">cand_support_dict</span><span class="p">[</span><span class="n">cand_j</span><span class="p">]</span>
                    <span class="n">prob</span> <span class="o">*=</span> <span class="n">greater_cand_support</span> <span class="o">/</span> <span class="p">(</span><span class="n">greater_cand_support</span> <span class="o">+</span> <span class="n">cand_support</span><span class="p">)</span>
            <span class="n">ranking_to_prob</span><span class="p">[</span><span class="n">ranking</span><span class="p">]</span> <span class="o">=</span> <span class="n">prob</span>
        <span class="k">return</span> <span class="n">ranking_to_prob</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>

        <span class="n">permutations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span><span class="p">))</span>
        <span class="n">ballot_pool</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">num_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_num</span><span class="p">(</span><span class="n">number_of_ballots</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="p">[</span><span class="n">bloc</span><span class="p">])</span>
            <span class="n">pref_interval_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pref_interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>

            <span class="n">ranking_to_prob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_prob</span><span class="p">(</span>
                <span class="n">permutations</span><span class="o">=</span><span class="n">permutations</span><span class="p">,</span> <span class="n">cand_support_dict</span><span class="o">=</span><span class="n">pref_interval_dict</span>
            <span class="p">)</span>

            <span class="n">indices</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ranking_to_prob</span><span class="p">))</span>
            <span class="n">prob_distrib</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ranking_to_prob</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">prob_distrib</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">prob_distrib</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prob_distrib</span><span class="p">]</span>

            <span class="n">ballots_indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                <span class="n">indices</span><span class="p">,</span>
                <span class="n">num_ballots</span><span class="p">,</span>
                <span class="n">p</span><span class="o">=</span><span class="n">prob_distrib</span><span class="p">,</span>
                <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">rankings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ranking_to_prob</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">rankings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ballots_indices</span><span class="p">]</span>

            <span class="n">ballot_pool</span> <span class="o">=</span> <span class="n">ballot_pool</span> <span class="o">+</span> <span class="n">ballots</span>

        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span>
            <span class="n">ballot_pool</span><span class="o">=</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pp</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.AlternatingCrossover" class="doc doc-heading">
          <code>AlternatingCrossover</code>


<a href="#votekit.ballot_generator.AlternatingCrossover" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>Class for Alternating Crossover style of generating ballots</p>
<p><strong>Attributes</strong></p>
<p><code>pref_interval_by_bloc</code>
:   dictionary mapping of slate to preference interval
    (ex. {race: {candidate : interval length}})</p>
<p><code>bloc_voter_prop</code>
:   dictionary mapping of slate to voter proportions
    (ex. {race: voter proportion})</p>
<p><code>slate_to_candidate</code>
:   dictionary mapping of slate to candidates (ex. {race: [candidate]})</p>
<p><code>bloc_crossover_rate</code>
:   dictionary mapping of percentage of crossover voters per bloc
    ex. {race: {other_race: 0.5}})</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotGenerator</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AlternatingCrossover</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for Alternating Crossover style of generating ballots</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `pref_interval_by_bloc`</span>
<span class="sd">    :   dictionary mapping of slate to preference interval</span>
<span class="sd">        (ex. {race: {candidate : interval length}})</span>

<span class="sd">    `bloc_voter_prop`</span>
<span class="sd">    :   dictionary mapping of slate to voter proportions</span>
<span class="sd">        (ex. {race: voter proportion})</span>

<span class="sd">    `slate_to_candidate`</span>
<span class="sd">    :   dictionary mapping of slate to candidates (ex. {race: [candidate]})</span>

<span class="sd">    `bloc_crossover_rate`</span>
<span class="sd">    :   dictionary mapping of percentage of crossover voters per bloc</span>
<span class="sd">        ex. {race: {other_race: 0.5}})</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotGenerator` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">slate_to_candidates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bloc_crossover_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">data</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># Call the parent class&#39;s __init__ method to handle common parameters</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span> <span class="o">=</span> <span class="n">slate_to_candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bloc_crossover_rate</span> <span class="o">=</span> <span class="n">bloc_crossover_rate</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>

        <span class="n">ballot_pool</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="n">num_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_num</span><span class="p">(</span><span class="n">number_of_ballots</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="p">[</span><span class="n">bloc</span><span class="p">])</span>
            <span class="n">crossover_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_crossover_rate</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>
            <span class="n">pref_interval_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pref_interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>

            <span class="c1"># generates crossover ballots from each bloc (allowing for more than two blocs)</span>
            <span class="k">for</span> <span class="n">opposing_slate</span> <span class="ow">in</span> <span class="n">crossover_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crossover_rate</span> <span class="o">=</span> <span class="n">crossover_dict</span><span class="p">[</span><span class="n">opposing_slate</span><span class="p">]</span>
                <span class="n">num_crossover_ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_num</span><span class="p">(</span><span class="n">crossover_rate</span> <span class="o">*</span> <span class="n">num_ballots</span><span class="p">)</span>

                <span class="n">opposing_cands</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span><span class="p">[</span><span class="n">opposing_slate</span><span class="p">]</span>
                <span class="n">bloc_cands</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_crossover_ballots</span><span class="p">):</span>
                    <span class="n">pref_for_opposing</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">pref_interval_dict</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">opposing_cands</span>
                    <span class="p">]</span>
                    <span class="c1"># convert to probability distribution</span>
                    <span class="n">pref_for_opposing</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">p</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">pref_for_opposing</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pref_for_opposing</span>
                    <span class="p">]</span>

                    <span class="n">pref_for_bloc</span> <span class="o">=</span> <span class="p">[</span><span class="n">pref_interval_dict</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">bloc_cands</span><span class="p">]</span>
                    <span class="c1"># convert to probability distribution</span>
                    <span class="n">pref_for_bloc</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">pref_for_bloc</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pref_for_bloc</span><span class="p">]</span>

                    <span class="n">bloc_cands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                            <span class="n">bloc_cands</span><span class="p">,</span>
                            <span class="n">p</span><span class="o">=</span><span class="n">pref_for_bloc</span><span class="p">,</span>
                            <span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">bloc_cands</span><span class="p">),</span>
                            <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">opposing_cands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                            <span class="n">opposing_cands</span><span class="p">,</span>
                            <span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">opposing_cands</span><span class="p">),</span>
                            <span class="n">p</span><span class="o">=</span><span class="n">pref_for_opposing</span><span class="p">,</span>
                            <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

                    <span class="c1"># alternate the bloc and opposing bloc candidates to create crossover ballots</span>
                    <span class="k">if</span> <span class="n">bloc</span> <span class="o">!=</span> <span class="n">opposing_slate</span><span class="p">:</span>  <span class="c1"># alternate</span>
                        <span class="n">ballot</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="n">item</span>
                            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">opposing_cands</span><span class="p">,</span> <span class="n">bloc_cands</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pair</span>
                            <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                        <span class="p">]</span>

                    <span class="c1"># check that ballot_length is shorter than total number of cands</span>
                    <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>

                <span class="c1"># Bloc ballots</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_ballots</span> <span class="o">-</span> <span class="n">num_crossover_ballots</span><span class="p">):</span>
                    <span class="n">ballot</span> <span class="o">=</span> <span class="n">bloc_cands</span> <span class="o">+</span> <span class="n">opposing_cands</span>
                    <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>

        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span>
            <span class="n">ballot_pool</span><span class="o">=</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pp</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.CambridgeSampler" class="doc doc-heading">
          <code>CambridgeSampler</code>


<a href="#votekit.ballot_generator.CambridgeSampler" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>Class for generating ballots based on historical RCV elections occuring
in Cambridge. Alternative election data can be used if specified</p>
<p><strong>Attributes</strong></p>
<p><code>slate_to_candidate</code>
:   dictionary mapping of slate to candidates (ex. {race: [candidate]})</p>
<p><code>pref_interval_by_bloc</code>
:   dictionary mapping of bloc to preference interval
    (ex. {race: {candidate : interval length}})</p>
<p><code>path</code>
:   file path to an election data file to sample from. Defaults to Cambridge elections</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotGenerator</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CambridgeSampler</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for generating ballots based on historical RCV elections occuring</span>
<span class="sd">    in Cambridge. Alternative election data can be used if specified</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `slate_to_candidate`</span>
<span class="sd">    :   dictionary mapping of slate to candidates (ex. {race: [candidate]})</span>

<span class="sd">    `pref_interval_by_bloc`</span>
<span class="sd">    :   dictionary mapping of bloc to preference interval</span>
<span class="sd">        (ex. {race: {candidate : interval length}})</span>

<span class="sd">    `path`</span>
<span class="sd">    :   file path to an election data file to sample from. Defaults to Cambridge elections</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotGenerator` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">slate_to_candidates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bloc_crossover_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">data</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># Call the parent class&#39;s __init__ method to handle common parameters</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span> <span class="o">=</span> <span class="n">slate_to_candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bloc_crossover_rate</span> <span class="o">=</span> <span class="n">bloc_crossover_rate</span>

        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>
            <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">BASE_DIR</span> <span class="o">/</span> <span class="s2">&quot;data/&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;Cambridge_09to17_ballot_types.p&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pickle_file</span><span class="p">:</span>
            <span class="n">ballot_frequencies</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pickle_file</span><span class="p">)</span>

        <span class="n">ballot_pool</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">blocs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">bloc</span> <span class="ow">in</span> <span class="n">blocs</span><span class="p">:</span>
            <span class="c1"># compute the number of voters in this bloc</span>
            <span class="n">bloc_voters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_num</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bloc_voter_prop</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span> <span class="o">*</span> <span class="n">number_of_ballots</span><span class="p">)</span>

            <span class="c1"># store the opposition bloc</span>
            <span class="n">opp_bloc</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">blocs</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">bloc</span><span class="p">))))</span>

            <span class="c1"># compute how many ballots list a bloc candidate first</span>
            <span class="n">bloc_first_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">freq</span>
                    <span class="k">for</span> <span class="n">ballot</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="n">ballot_frequencies</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">ballot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">bloc</span>
                <span class="p">]</span>
            <span class="p">)</span>

            <span class="c1"># Compute the pref interval for this bloc</span>
            <span class="n">pref_interval_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pref_interval_by_bloc</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>

            <span class="c1"># compute the relative probabilities of each ballot</span>
            <span class="c1"># sorted by ones where the ballot lists the bloc first</span>
            <span class="c1"># and those that list the opp first</span>
            <span class="n">prob_ballot_given_bloc_first</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">ballot</span><span class="p">:</span> <span class="n">freq</span> <span class="o">/</span> <span class="n">bloc_first_count</span>
                <span class="k">for</span> <span class="n">ballot</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="n">ballot_frequencies</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ballot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">bloc</span>
            <span class="p">}</span>
            <span class="n">prob_ballot_given_opp_first</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">ballot</span><span class="p">:</span> <span class="n">freq</span> <span class="o">/</span> <span class="n">bloc_first_count</span>
                <span class="k">for</span> <span class="n">ballot</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="n">ballot_frequencies</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ballot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">opp_bloc</span>
            <span class="p">}</span>

            <span class="c1"># Generate ballots</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bloc_voters</span><span class="p">):</span>
                <span class="c1"># Randomly choose first choice based off</span>
                <span class="c1"># bloc crossover rate</span>
                <span class="n">first_choice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">bloc</span><span class="p">,</span> <span class="n">opp_bloc</span><span class="p">],</span>
                    <span class="n">p</span><span class="o">=</span><span class="p">[</span>
                        <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bloc_crossover_rate</span><span class="p">[</span><span class="n">bloc</span><span class="p">][</span><span class="n">opp_bloc</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">bloc_crossover_rate</span><span class="p">[</span><span class="n">bloc</span><span class="p">][</span><span class="n">opp_bloc</span><span class="p">],</span>
                    <span class="p">],</span>
                <span class="p">)</span>
                <span class="c1"># Based on first choice, randomly choose</span>
                <span class="c1"># ballots weighted by Cambridge frequency</span>
                <span class="k">if</span> <span class="n">first_choice</span> <span class="o">==</span> <span class="n">bloc</span><span class="p">:</span>
                    <span class="n">bloc_ordering</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
                        <span class="nb">list</span><span class="p">(</span><span class="n">prob_ballot_given_bloc_first</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                        <span class="n">weights</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">prob_ballot_given_bloc_first</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span>
                        <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bloc_ordering</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
                        <span class="nb">list</span><span class="p">(</span><span class="n">prob_ballot_given_opp_first</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                        <span class="n">weights</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">prob_ballot_given_opp_first</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span>
                        <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="c1"># Now turn bloc ordering into candidate ordering</span>
                <span class="n">pl_ordering</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                        <span class="nb">list</span><span class="p">(</span><span class="n">pref_interval_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">ballot_length</span><span class="p">,</span>
                        <span class="n">p</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">pref_interval_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span>
                        <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">ordered_bloc_slate</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">pl_ordering</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span><span class="p">[</span><span class="n">bloc</span><span class="p">]</span>
                <span class="p">]</span>
                <span class="n">ordered_opp_slate</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">pl_ordering</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">slate_to_candidates</span><span class="p">[</span><span class="n">opp_bloc</span><span class="p">]</span>
                <span class="p">]</span>

                <span class="c1"># Fill in the bloc slots as determined</span>
                <span class="c1"># With the candidate ordering generated with PL</span>
                <span class="n">full_ballot</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bloc_ordering</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="n">bloc</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">ordered_bloc_slate</span><span class="p">:</span>
                            <span class="n">full_ballot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ordered_bloc_slate</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">ordered_opp_slate</span><span class="p">:</span>
                            <span class="n">full_ballot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ordered_opp_slate</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

                <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">full_ballot</span><span class="p">))</span>

        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span>
            <span class="n">ballot_pool</span><span class="o">=</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">candidates</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pp</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.OneDimSpatial" class="doc doc-heading">
          <code>OneDimSpatial</code>


<a href="#votekit.ballot_generator.OneDimSpatial" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotGenerator" href="#votekit.ballot_generator.BallotGenerator">BallotGenerator</a></code></p>

  
      <p>1-D spatial model for ballot generation</p>
<p><strong>Attributes</strong></p>
<p>See <code>BallotGenerator</code> base class</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotGenerator</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OneDimSpatial</span><span class="p">(</span><span class="n">BallotGenerator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1-D spatial model for ballot generation</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    See `BallotGenerator` base class</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotGenerator` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">generate_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
        <span class="n">candidate_position_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">}</span>
        <span class="n">voter_positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">number_of_ballots</span><span class="p">)</span>

        <span class="n">ballot_pool</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">vp</span> <span class="ow">in</span> <span class="n">voter_positions</span><span class="p">:</span>
            <span class="n">distance_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">c</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">vp</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="ow">in</span> <span class="n">candidate_position_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="n">candidate_order</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">distance_dict</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">distance_dict</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">)</span>
            <span class="n">ballot_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">candidate_order</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ballot_pool_to_profile</span><span class="p">(</span><span class="n">ballot_pool</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">candidates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.ImpartialCulture" class="doc doc-heading">
          <code>ImpartialCulture</code>


<a href="#votekit.ballot_generator.ImpartialCulture" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotSimplex" href="#votekit.ballot_generator.BallotSimplex">BallotSimplex</a></code></p>

  
      <p>Impartial Culture model with an alpha value of 1e10 (should be infinity theoretically)</p>
<p><strong>Attributes</strong></p>
<p>See <code>BallotSimplex</code> object</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotSimplex</code> object</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImpartialCulture</span><span class="p">(</span><span class="n">BallotSimplex</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Impartial Culture model with an alpha value of 1e10 (should be infinity theoretically)</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    See `BallotSimplex` object</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotSimplex` object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">),</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.ballot_generator.ImpartialAnonymousCulture" class="doc doc-heading">
          <code>ImpartialAnonymousCulture</code>


<a href="#votekit.ballot_generator.ImpartialAnonymousCulture" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.ballot_generator.BallotSimplex" href="#votekit.ballot_generator.BallotSimplex">BallotSimplex</a></code></p>

  
      <p>Impartial Anonymous Culture model with an alpha value of 1</p>
<p><strong>Attributes</strong></p>
<p>See <code>BallotSimplex</code> base class</p>
<p><strong>Methods</strong></p>
<p>See <code>BallotSimplex</code> base class</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/ballot_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImpartialAnonymousCulture</span><span class="p">(</span><span class="n">BallotSimplex</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Impartial Anonymous Culture model with an alpha value of 1</span>

<span class="sd">     **Attributes**</span>

<span class="sd">    See `BallotSimplex` base class</span>

<span class="sd">    **Methods**</span>

<span class="sd">    See `BallotSimplex` base class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div><h2 id="elections">Elections<a class="headerlink" href="#elections" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.Bloc" class="doc doc-heading">
          <code>Bloc</code>


<a href="#votekit.elections.election_types.Bloc" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Elects m candidates with the highest m-approval scores. The m-approval
score of a candidate is equal to the number of voters who rank this
candidate among their m top ranked candidates.</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Bloc</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Elects m candidates with the highest m-approval scores. The m-approval</span>
<span class="sd">    score of a candidate is equal to the number of voters who rank this</span>
<span class="sd">    candidate among their m top ranked candidates.</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts a Limited election to elect m-candidates</span>

<span class="sd">        Returns:</span>
<span class="sd">           An ElectionState object for a Limited election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">limited_equivalent</span> <span class="o">=</span> <span class="n">Limited</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
            <span class="n">k</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
            <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">limited_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="k">return</span> <span class="n">outcome</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs complete Bloc election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object with results for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Bloc.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Bloc.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs complete Bloc election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object with results for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs complete Bloc election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object with results for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Bloc.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Bloc.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts a Limited election to elect m-candidates</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a Limited election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts a Limited election to elect m-candidates</span>

<span class="sd">    Returns:</span>
<span class="sd">       An ElectionState object for a Limited election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">limited_equivalent</span> <span class="o">=</span> <span class="n">Limited</span><span class="p">(</span>
        <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
        <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="n">limited_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
    <span class="k">return</span> <span class="n">outcome</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.Borda" class="doc doc-heading">
          <code>Borda</code>


<a href="#votekit.elections.election_types.Borda" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Positional voting system that assigns a decreasing number of points to
candidates based on order and a score vector. The conventional score
vector is linear (n, n-1, ... 1)</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>score_vector</code>
:   (Optional) weights assigned to candidate ranking</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Borda</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Positional voting system that assigns a decreasing number of points to</span>
<span class="sd">    candidates based on order and a score vector. The conventional score</span>
<span class="sd">    vector is linear (n, n-1, ... 1)</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `score_vector`</span>
<span class="sd">    :   (Optional) weights assigned to candidate ranking</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">score_vector</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Fraction</span><span class="p">]],</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_vector</span> <span class="o">=</span> <span class="n">score_vector</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete Borda contest as Borda is not a round-by-round</span>
<span class="sd">        system</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">borda_dict</span> <span class="o">=</span> <span class="n">borda_scores</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">score_vector</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score_vector</span>
        <span class="p">)</span>

        <span class="n">ranking</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">borda_dict</span><span class="p">)</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
        <span class="p">)</span>

        <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
        <span class="p">)</span>

        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
        <span class="k">return</span> <span class="n">new_state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete Borda contest</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Borda.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Borda.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete Borda contest</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete Borda contest</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Borda.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Borda.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete Borda contest as Borda is not a round-by-round
system</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete Borda contest as Borda is not a round-by-round</span>
<span class="sd">    system</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">borda_dict</span> <span class="o">=</span> <span class="n">borda_scores</span><span class="p">(</span>
        <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">score_vector</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score_vector</span>
    <span class="p">)</span>

    <span class="n">ranking</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">borda_dict</span><span class="p">)</span>
    <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
    <span class="p">)</span>

    <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
    <span class="p">)</span>

    <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
        <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
        <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
        <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
        <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
    <span class="k">return</span> <span class="n">new_state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.CondoBorda" class="doc doc-heading">
          <code>CondoBorda</code>


<a href="#votekit.elections.election_types.CondoBorda" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Elects candidates ordered by dominating set, but breaks ties
between candidates with Borda</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CondoBorda</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Elects candidates ordered by dominating set, but breaks ties</span>
<span class="sd">    between candidates with Borda</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts a complete Conda-Borda election as it is not a round-by-round</span>
<span class="sd">        system</span>

<span class="sd">        Returns:</span>
<span class="sd">            An `ElectionState` object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pwc_graph</span> <span class="o">=</span> <span class="n">PairwiseComparisonGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>
        <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="n">pwc_graph</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="s2">&quot;borda&quot;</span>
        <span class="p">)</span>
        <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
        <span class="p">)</span>

        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
        <span class="k">return</span> <span class="n">new_state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete Conda-Borda election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.CondoBorda.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.CondoBorda.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete Conda-Borda election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete Conda-Borda election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.CondoBorda.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.CondoBorda.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts a complete Conda-Borda election as it is not a round-by-round
system</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An <code>ElectionState</code> object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts a complete Conda-Borda election as it is not a round-by-round</span>
<span class="sd">    system</span>

<span class="sd">    Returns:</span>
<span class="sd">        An `ElectionState` object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pwc_graph</span> <span class="o">=</span> <span class="n">PairwiseComparisonGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>
    <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="n">pwc_graph</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
    <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="s2">&quot;borda&quot;</span>
    <span class="p">)</span>
    <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
    <span class="p">)</span>

    <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
        <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
        <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
        <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
        <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
    <span class="k">return</span> <span class="n">new_state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.DominatingSets" class="doc doc-heading">
          <code>DominatingSets</code>


<a href="#votekit.elections.election_types.DominatingSets" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Finds tiers of candidates by dominating set,which is a set of candidates
such that every candidate in the set wins head to head comparisons against
candidates outside of it</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DominatingSets</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds tiers of candidates by dominating set,which is a set of candidates</span>
<span class="sd">    such that every candidate in the set wins head to head comparisons against</span>
<span class="sd">    candidates outside of it</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>


<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts a complete DominatingSets election as it is not a round-by-round</span>
<span class="sd">        system</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pwc_graph</span> <span class="o">=</span> <span class="n">PairwiseComparisonGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>
        <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="n">pwc_graph</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
                <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">elected</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
                <span class="n">eliminated</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">,</span>
                <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
                <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
                <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">elected</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span>
                <span class="n">eliminated</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
                <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
        <span class="k">return</span> <span class="n">new_state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete DominatingSets election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.DominatingSets.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.DominatingSets.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete DominatingSets election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete DominatingSets election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.DominatingSets.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.DominatingSets.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts a complete DominatingSets election as it is not a round-by-round
system</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts a complete DominatingSets election as it is not a round-by-round</span>
<span class="sd">    system</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pwc_graph</span> <span class="o">=</span> <span class="n">PairwiseComparisonGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>
    <span class="n">dominating_tiers</span> <span class="o">=</span> <span class="n">pwc_graph</span><span class="o">.</span><span class="n">dominating_tiers</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">dominating_tiers</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
            <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
    <span class="k">return</span> <span class="n">new_state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.Limited" class="doc doc-heading">
          <code>Limited</code>


<a href="#votekit.elections.election_types.Limited" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Elects m (seats) candidates with the highest k-approval scores.
The k-approval score of a candidate is equal to the number of voters who </p>
<p>rank this candidate among their k top ranked candidates.</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>k</code>
:   value of an approval score</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Limited</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Elects m (seats) candidates with the highest k-approval scores.</span>
<span class="sd">    The k-approval score of a candidate is equal to the number of voters who \n</span>
<span class="sd">    rank this candidate among their k top ranked candidates.</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `k`</span>
<span class="sd">    :   value of an approval score</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts Limited election in which m-candidates are elected based</span>
<span class="sd">        on approval scores</span>

<span class="sd">        Returns:</span>
<span class="sd">           An ElectionState object for a Limited election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
        <span class="n">candidate_approvals</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">():</span>
            <span class="c1"># First we have to determine which candidates are approved</span>
            <span class="c1"># i.e. in first k ranks on a ballot</span>
            <span class="n">approvals</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cand_set</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">):</span>
                <span class="c1"># If list of total candidates before and including current set</span>
                <span class="c1"># are less than seat count, all candidates are approved</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
                    <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cand_set</span><span class="p">))</span>
                <span class="c1"># If list of total candidates before current set</span>
                <span class="c1"># are greater than seat count, no candidates are approved</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span><span class="n">i</span><span class="p">])))</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
                    <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">([])</span>
                <span class="c1"># Else we know the cutoff is in the set, we compute and randomly</span>
                <span class="c1"># select the number of candidates we can select</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">accepted</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span><span class="n">i</span><span class="p">])))</span>
                    <span class="n">num_to_allow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">-</span> <span class="n">accepted</span>
                    <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cand_set</span><span class="p">),</span> <span class="n">num_to_allow</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="p">)</span>

            <span class="c1"># Add approval votes equal to ballot weight (i.e. number of voters with this ballot)</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">approvals</span><span class="p">:</span>
                <span class="n">candidate_approvals</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

        <span class="c1"># Order candidates by number of approval votes received</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">candidate_approvals</span><span class="p">)</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
        <span class="p">)</span>
        <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
        <span class="p">)</span>
        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete Limited election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object with results for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Limited.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Limited.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete Limited election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object with results for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete Limited election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object with results for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.Limited.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.Limited.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts Limited election in which m-candidates are elected based
on approval scores</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a Limited election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts Limited election in which m-candidates are elected based</span>
<span class="sd">    on approval scores</span>

<span class="sd">    Returns:</span>
<span class="sd">       An ElectionState object for a Limited election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="n">candidate_approvals</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">():</span>
        <span class="c1"># First we have to determine which candidates are approved</span>
        <span class="c1"># i.e. in first k ranks on a ballot</span>
        <span class="n">approvals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cand_set</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">):</span>
            <span class="c1"># If list of total candidates before and including current set</span>
            <span class="c1"># are less than seat count, all candidates are approved</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
                <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cand_set</span><span class="p">))</span>
            <span class="c1"># If list of total candidates before current set</span>
            <span class="c1"># are greater than seat count, no candidates are approved</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span><span class="n">i</span><span class="p">])))</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
                <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">([])</span>
            <span class="c1"># Else we know the cutoff is in the set, we compute and randomly</span>
            <span class="c1"># select the number of candidates we can select</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">accepted</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span><span class="n">i</span><span class="p">])))</span>
                <span class="n">num_to_allow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">-</span> <span class="n">accepted</span>
                <span class="n">approvals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cand_set</span><span class="p">),</span> <span class="n">num_to_allow</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="c1"># Add approval votes equal to ballot weight (i.e. number of voters with this ballot)</span>
        <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">approvals</span><span class="p">:</span>
            <span class="n">candidate_approvals</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

    <span class="c1"># Order candidates by number of approval votes received</span>
    <span class="n">ranking</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">candidate_approvals</span><span class="p">)</span>
    <span class="n">ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
    <span class="p">)</span>
    <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span> <span class="o">=</span> <span class="n">elect_cands_from_set_ranking</span><span class="p">(</span>
        <span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
    <span class="p">)</span>
    <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
        <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
        <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
        <span class="n">remaining</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(),</span>
        <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.Plurality" class="doc doc-heading">
          <code>Plurality</code>


<a href="#votekit.elections.election_types.Plurality" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="votekit.elections.election_types.SNTV" href="#votekit.elections.election_types.SNTV">SNTV</a></code></p>

  
      <p>Simulates a single or multi-winner plurality election. Inherits
methods from <code>SNTV</code> to run election</p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Plurality</span><span class="p">(</span><span class="n">SNTV</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a single or multi-winner plurality election. Inherits</span>
<span class="sd">    methods from `SNTV` to run election</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.SNTV" class="doc doc-heading">
          <code>SNTV</code>


<a href="#votekit.elections.election_types.SNTV" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Single nontransferable vote (SNTV): Elects k-candidates with the highest
Plurality scores</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SNTV</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Single nontransferable vote (SNTV): Elects k-candidates with the highest</span>
<span class="sd">    Plurality scores</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts a Limited election to elect k-candidates</span>

<span class="sd">        Returns:</span>
<span class="sd">           An ElectionState object for a Limited election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">limited_equivalent</span> <span class="o">=</span> <span class="n">Limited</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
        <span class="p">)</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">limited_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="k">return</span> <span class="n">outcome</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs complete SNTV election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object with results for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SNTV.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.SNTV.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs complete SNTV election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object with results for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs complete SNTV election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object with results for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SNTV.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.SNTV.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts a Limited election to elect k-candidates</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a Limited election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts a Limited election to elect k-candidates</span>

<span class="sd">    Returns:</span>
<span class="sd">       An ElectionState object for a Limited election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">limited_equivalent</span> <span class="o">=</span> <span class="n">Limited</span><span class="p">(</span>
        <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
    <span class="p">)</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="n">limited_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
    <span class="k">return</span> <span class="n">outcome</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.SNTV_STV_Hybrid" class="doc doc-heading">
          <code>SNTV_STV_Hybrid</code>


<a href="#votekit.elections.election_types.SNTV_STV_Hybrid" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Election methd that first runs SNTV to a cutoff, then runs STV to
pick a committee with a given number of seats</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>transfer</code>
:   transfer method (e.g. fractional transfer)</p>
<p><code>r1_cutoff</code>
:   first-round cutoff value</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SNTV_STV_Hybrid</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Election methd that first runs SNTV to a cutoff, then runs STV to</span>
<span class="sd">    pick a committee with a given number of seats</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `transfer`</span>
<span class="sd">    :   transfer method (e.g. fractional transfer)</span>

<span class="sd">    `r1_cutoff`</span>
<span class="sd">    :   first-round cutoff value</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">transfer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">r1_cutoff</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer</span> <span class="o">=</span> <span class="n">transfer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r1_cutoff</span> <span class="o">=</span> <span class="n">r1_cutoff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;SNTV&quot;</span>  <span class="c1"># SNTV, switches to STV, then Complete</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates one round an SNTV_STV election</span>

<span class="sd">        Args:</span>
<span class="sd">            stage: Stage of the hybrid election, can be SNTV or STV</span>

<span class="sd">        Returns:</span>
<span class="sd">           An ElectionState object for a given round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span>

        <span class="n">new_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;SNTV&quot;</span><span class="p">:</span>
            <span class="n">round_state</span> <span class="o">=</span> <span class="n">SNTV</span><span class="p">(</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">r1_cutoff</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
            <span class="p">)</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>

            <span class="c1"># The STV election will be run on the new election state</span>
            <span class="c1"># Therefore we should not add any winners, but rather</span>
            <span class="c1"># set the SNTV winners as remaining candidates and update pref profiles</span>
            <span class="n">new_profile</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span>
                <span class="n">ballots</span><span class="o">=</span><span class="n">remove_cand</span><span class="p">(</span>
                    <span class="nb">set</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">round_state</span><span class="o">.</span><span class="n">eliminated</span><span class="p">),</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
                <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">elected</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
                <span class="n">eliminated</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">eliminated</span><span class="p">,</span>
                <span class="n">remaining</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">new_profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">())],</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">new_profile</span><span class="p">,</span>
                <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;STV&quot;</span><span class="p">:</span>
            <span class="n">round_state</span> <span class="o">=</span> <span class="n">STV</span><span class="p">(</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
                <span class="n">transfer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer</span><span class="p">,</span>
                <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
                <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>

            <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
                <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">elected</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">(),</span>
                <span class="n">eliminated</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">(),</span>
                <span class="n">remaining</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">remaining</span><span class="p">,</span>
                <span class="n">profile</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
                <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Update election stage to cue next run step</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;SNTV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;STV&quot;</span>
        <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;STV&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;Complete&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">new_state</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs complete SNTV_STV election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object with results for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">!=</span> <span class="s2">&quot;Complete&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stage</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SNTV_STV_Hybrid.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs complete SNTV_STV election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object with results for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs complete SNTV_STV election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object with results for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">!=</span> <span class="s2">&quot;Complete&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stage</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SNTV_STV_Hybrid.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span></code>

<a href="#votekit.elections.election_types.SNTV_STV_Hybrid.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates one round an SNTV_STV election</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>stage</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stage of the hybrid election, can be SNTV or STV</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a given round</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates one round an SNTV_STV election</span>

<span class="sd">    Args:</span>
<span class="sd">        stage: Stage of the hybrid election, can be SNTV or STV</span>

<span class="sd">    Returns:</span>
<span class="sd">       An ElectionState object for a given round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span>

    <span class="n">new_state</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;SNTV&quot;</span><span class="p">:</span>
        <span class="n">round_state</span> <span class="o">=</span> <span class="n">SNTV</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">r1_cutoff</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
        <span class="p">)</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>

        <span class="c1"># The STV election will be run on the new election state</span>
        <span class="c1"># Therefore we should not add any winners, but rather</span>
        <span class="c1"># set the SNTV winners as remaining candidates and update pref profiles</span>
        <span class="n">new_profile</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span>
            <span class="n">ballots</span><span class="o">=</span><span class="n">remove_cand</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">round_state</span><span class="o">.</span><span class="n">eliminated</span><span class="p">),</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">eliminated</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">new_profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">())],</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">new_profile</span><span class="p">,</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;STV&quot;</span><span class="p">:</span>
        <span class="n">round_state</span> <span class="o">=</span> <span class="n">STV</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">transfer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer</span><span class="p">,</span>
            <span class="n">seats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">,</span>
            <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>

        <span class="n">new_state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">(),</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">get_all_eliminated</span><span class="p">(),</span>
            <span class="n">remaining</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">remaining</span><span class="p">,</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">round_state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Update election stage to cue next run step</span>
    <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;SNTV&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;STV&quot;</span>
    <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;STV&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;Complete&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>  <span class="c1"># type: ignore</span>
    <span class="k">return</span> <span class="n">new_state</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.STV" class="doc doc-heading">
          <code>STV</code>


<a href="#votekit.elections.election_types.STV" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Class for single-winner IRV and multi-winner STV elections</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>transfer</code>
:   transfer method (e.g. fractional transfer)</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>quota</code>
:   formula to calculate quota (defaults to droop)</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">STV</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for single-winner IRV and multi-winner STV elections</span>

<span class="sd">     **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `transfer`</span>
<span class="sd">    :   transfer method (e.g. fractional transfer)</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `quota`</span>
<span class="sd">    :   formula to calculate quota (defaults to droop)</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">transfer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">quota</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;droop&quot;</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># let parent class handle the og profile and election state</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transfer</span> <span class="o">=</span> <span class="n">transfer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quota</span> <span class="o">=</span> <span class="n">quota</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_threshold</span><span class="p">()</span>

    <span class="c1"># can cache since it will not change throughout rounds</span>
    <span class="k">def</span> <span class="nf">get_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates threshold required for election</span>

<span class="sd">        Returns:</span>
<span class="sd">            Value of the threshold</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quota</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quota</span>
        <span class="k">if</span> <span class="n">quota</span> <span class="o">==</span> <span class="s2">&quot;droop&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">quota</span> <span class="o">==</span> <span class="s2">&quot;hare&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Misspelled or unknown quota type&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">next_round</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if the number of seats has been met to call an election</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if number of seats has been met, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cands_elected</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">():</span>
            <span class="n">cands_elected</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cands_elected</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates one round an STV election</span>

<span class="sd">        Returns:</span>
<span class="sd">           An ElectionState object for a given round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
        <span class="n">ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
        <span class="n">round_votes</span> <span class="o">=</span> <span class="n">compute_votes</span><span class="p">(</span><span class="n">remaining</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>
        <span class="n">elected</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">eliminated</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># if number of remaining candidates equals number of remaining seats,</span>
        <span class="c1"># everyone is elected</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()):</span>
            <span class="n">elected</span> <span class="o">=</span> <span class="p">[{</span><span class="n">cand</span><span class="p">}</span> <span class="k">for</span> <span class="n">cand</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">]</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># elect all candidates who crossed threshold</span>
        <span class="k">elif</span> <span class="n">round_votes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">votes</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">votes</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
                    <span class="n">elected</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">candidate</span><span class="p">})</span>
                    <span class="n">remaining</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>
                    <span class="n">ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span>
                        <span class="n">candidate</span><span class="p">,</span>
                        <span class="n">ballots</span><span class="p">,</span>
                        <span class="p">{</span><span class="n">cand</span><span class="p">:</span> <span class="n">votes</span> <span class="k">for</span> <span class="n">cand</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">},</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">,</span>
                    <span class="p">)</span>
        <span class="c1"># since no one has crossed threshold, eliminate one of the people</span>
        <span class="c1"># with least first place votes</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
            <span class="n">lp_candidates</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">candidate</span>
                <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span>
                <span class="k">if</span> <span class="n">votes</span> <span class="o">==</span> <span class="n">round_votes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">votes</span>
            <span class="p">]</span>

            <span class="n">lp_cand</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
                <span class="n">ranking</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">lp_candidates</span><span class="p">)],</span>
                <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
                <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
            <span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">eliminated</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">)</span>
            <span class="n">ballots</span> <span class="o">=</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>
            <span class="n">remaining</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">)))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elected</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">elected</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span>
                <span class="n">first_place_votes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">),</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">elected</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
            <span class="p">)</span>

        <span class="c1"># Make sure list-of-sets have non-empty elements</span>
        <span class="n">elected</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">elected</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>
        <span class="n">eliminated</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">eliminated</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>

        <span class="n">remaining</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">remaining</span><span class="p">)]</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">remaining</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
            <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="n">remaining</span><span class="p">,</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballots</span><span class="p">),</span>
            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs complete STV election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object with results for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Length of elected set equal to number of seats (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.STV.get_threshold" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_threshold</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.STV.get_threshold" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Calculates threshold required for election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Value of the threshold</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates threshold required for election</span>

<span class="sd">    Returns:</span>
<span class="sd">        Value of the threshold</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">quota</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quota</span>
    <span class="k">if</span> <span class="n">quota</span> <span class="o">==</span> <span class="s2">&quot;droop&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">quota</span> <span class="o">==</span> <span class="s2">&quot;hare&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_profile</span><span class="o">.</span><span class="n">num_ballots</span><span class="p">()</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Misspelled or unknown quota type&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.STV.next_round" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">next_round</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.STV.next_round" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Determines if the number of seats has been met to call an election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if number of seats has been met, False otherwise</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">next_round</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines if the number of seats has been met to call an election</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if number of seats has been met, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cands_elected</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">():</span>
        <span class="n">cands_elected</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cands_elected</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.STV.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.STV.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs complete STV election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object with results for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs complete STV election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object with results for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Length of elected set equal to number of seats (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.STV.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.STV.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates one round an STV election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a given round</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates one round an STV election</span>

<span class="sd">    Returns:</span>
<span class="sd">       An ElectionState object for a given round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
    <span class="n">round_votes</span> <span class="o">=</span> <span class="n">compute_votes</span><span class="p">(</span><span class="n">remaining</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>
    <span class="n">elected</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">eliminated</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># if number of remaining candidates equals number of remaining seats,</span>
    <span class="c1"># everyone is elected</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()):</span>
        <span class="n">elected</span> <span class="o">=</span> <span class="p">[{</span><span class="n">cand</span><span class="p">}</span> <span class="k">for</span> <span class="n">cand</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">]</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># elect all candidates who crossed threshold</span>
    <span class="k">elif</span> <span class="n">round_votes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">votes</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">votes</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
                <span class="n">elected</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">candidate</span><span class="p">})</span>
                <span class="n">remaining</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>
                <span class="n">ballots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span>
                    <span class="n">candidate</span><span class="p">,</span>
                    <span class="n">ballots</span><span class="p">,</span>
                    <span class="p">{</span><span class="n">cand</span><span class="p">:</span> <span class="n">votes</span> <span class="k">for</span> <span class="n">cand</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span><span class="p">},</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">,</span>
                <span class="p">)</span>
    <span class="c1"># since no one has crossed threshold, eliminate one of the people</span>
    <span class="c1"># with least first place votes</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_round</span><span class="p">():</span>
        <span class="n">lp_candidates</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">candidate</span>
            <span class="k">for</span> <span class="n">candidate</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">round_votes</span>
            <span class="k">if</span> <span class="n">votes</span> <span class="o">==</span> <span class="n">round_votes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">votes</span>
        <span class="p">]</span>

        <span class="n">lp_cand</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">lp_candidates</span><span class="p">)],</span>
            <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
        <span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">eliminated</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">)</span>
        <span class="n">ballots</span> <span class="o">=</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>
        <span class="n">remaining</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">lp_cand</span><span class="p">)))</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elected</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">elected</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span>
            <span class="n">first_place_votes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">),</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">elected</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="c1"># Make sure list-of-sets have non-empty elements</span>
    <span class="n">elected</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">elected</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>
    <span class="n">eliminated</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">eliminated</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>

    <span class="n">remaining</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">remaining</span><span class="p">)]</span>
    <span class="n">remaining</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">remaining</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
        <span class="n">curr_round</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">elected</span><span class="o">=</span><span class="n">elected</span><span class="p">,</span>
        <span class="n">eliminated</span><span class="o">=</span><span class="n">eliminated</span><span class="p">,</span>
        <span class="n">remaining</span><span class="o">=</span><span class="n">remaining</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballots</span><span class="p">),</span>
        <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.SequentialRCV" class="doc doc-heading">
          <code>SequentialRCV</code>


<a href="#votekit.elections.election_types.SequentialRCV" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Class to conduct Sequential RCV election, in which votes are not transferred
after a candidate has reached threshold, or been elected</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SequentialRCV</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to conduct Sequential RCV election, in which votes are not transferred</span>
<span class="sd">    after a candidate has reached threshold, or been elected</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">seats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a single step of the sequential RCV contest or a full</span>
<span class="sd">        IRV election run on the current set of candidates</span>

<span class="sd">         Returns:</span>
<span class="sd">           An ElectionState object for a given round</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_election_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

        <span class="n">IRVrun</span> <span class="o">=</span> <span class="n">STV</span><span class="p">(</span>
            <span class="n">old_profile</span><span class="p">,</span> <span class="n">transfer</span><span class="o">=</span><span class="n">seqRCV_transfer</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
        <span class="p">)</span>
        <span class="n">old_election</span> <span class="o">=</span> <span class="n">IRVrun</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
        <span class="n">elected_cand</span> <span class="o">=</span> <span class="n">old_election</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Removes elected candidate from Ballot List</span>
        <span class="n">updated_ballots</span> <span class="o">=</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">elected_cand</span><span class="p">,</span> <span class="n">old_profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">())</span>

        <span class="c1"># Updates profile with removed candidates</span>
        <span class="n">updated_profile</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">updated_ballots</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
            <span class="n">curr_round</span><span class="o">=</span><span class="n">old_election_state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">elected</span><span class="o">=</span><span class="p">[</span><span class="n">elected_cand</span><span class="p">],</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">updated_profile</span><span class="p">,</span>
            <span class="n">previous</span><span class="o">=</span><span class="n">old_election_state</span><span class="p">,</span>
            <span class="n">remaining</span><span class="o">=</span><span class="n">old_election</span><span class="o">.</span><span class="n">remaining</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete sequential RCV contest.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profile</span>
        <span class="n">elected</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: ignore</span>
        <span class="n">seqRCV_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">elected</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">:</span>
            <span class="n">seqRCV_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">(</span><span class="n">old_profile</span><span class="p">)</span>
            <span class="n">elected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seqRCV_step</span><span class="o">.</span><span class="n">elected</span><span class="p">)</span>
            <span class="n">old_profile</span> <span class="o">=</span> <span class="n">seqRCV_step</span><span class="o">.</span><span class="n">profile</span>
        <span class="k">return</span> <span class="n">seqRCV_step</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SequentialRCV.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.SequentialRCV.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete sequential RCV contest.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete sequential RCV contest.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profile</span>
    <span class="n">elected</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: ignore</span>
    <span class="n">seqRCV_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">elected</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">:</span>
        <span class="n">seqRCV_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">(</span><span class="n">old_profile</span><span class="p">)</span>
        <span class="n">elected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seqRCV_step</span><span class="o">.</span><span class="n">elected</span><span class="p">)</span>
        <span class="n">old_profile</span> <span class="o">=</span> <span class="n">seqRCV_step</span><span class="o">.</span><span class="n">profile</span>
    <span class="k">return</span> <span class="n">seqRCV_step</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.SequentialRCV.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">(</span><span class="n">old_profile</span><span class="p">)</span></code>

<a href="#votekit.elections.election_types.SequentialRCV.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a single step of the sequential RCV contest or a full
IRV election run on the current set of candidates</p>
<p>Returns:
   An ElectionState object for a given round</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a single step of the sequential RCV contest or a full</span>
<span class="sd">    IRV election run on the current set of candidates</span>

<span class="sd">     Returns:</span>
<span class="sd">       An ElectionState object for a given round</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_election_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

    <span class="n">IRVrun</span> <span class="o">=</span> <span class="n">STV</span><span class="p">(</span>
        <span class="n">old_profile</span><span class="p">,</span> <span class="n">transfer</span><span class="o">=</span><span class="n">seqRCV_transfer</span><span class="p">,</span> <span class="n">seats</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span>
    <span class="p">)</span>
    <span class="n">old_election</span> <span class="o">=</span> <span class="n">IRVrun</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
    <span class="n">elected_cand</span> <span class="o">=</span> <span class="n">old_election</span><span class="o">.</span><span class="n">get_all_winners</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Removes elected candidate from Ballot List</span>
    <span class="n">updated_ballots</span> <span class="o">=</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">elected_cand</span><span class="p">,</span> <span class="n">old_profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">())</span>

    <span class="c1"># Updates profile with removed candidates</span>
    <span class="n">updated_profile</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">updated_ballots</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ElectionState</span><span class="p">(</span>
        <span class="n">curr_round</span><span class="o">=</span><span class="n">old_election_state</span><span class="o">.</span><span class="n">curr_round</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">elected</span><span class="o">=</span><span class="p">[</span><span class="n">elected_cand</span><span class="p">],</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">updated_profile</span><span class="p">,</span>
        <span class="n">previous</span><span class="o">=</span><span class="n">old_election_state</span><span class="p">,</span>
        <span class="n">remaining</span><span class="o">=</span><span class="n">old_election</span><span class="o">.</span><span class="n">remaining</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="votekit.elections.election_types.TopTwo" class="doc doc-heading">
          <code>TopTwo</code>


<a href="#votekit.elections.election_types.TopTwo" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="votekit.models.Election">Election</span></code></p>

  
      <p>Eliminates all but the top two plurality vote getters, and then
conducts a runoff between them, reallocating other ballots</p>
<p><strong>Attributes</strong></p>
<p><code>profile</code>
:   PreferenceProfile to run election on</p>
<p><code>seats</code>
:   number of seats to be elected</p>
<p><code>ballot_ties</code>
:   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</p>
<p><code>tiebreak</code>
:   (Optional) resolves procedural and final ties by specified tiebreak</p>
<p><strong>Methods</strong></p>

            <details class="quote">
              <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TopTwo</span><span class="p">(</span><span class="n">Election</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Eliminates all but the top two plurality vote getters, and then</span>
<span class="sd">    conducts a runoff between them, reallocating other ballots</span>

<span class="sd">    **Attributes**</span>

<span class="sd">    `profile`</span>
<span class="sd">    :   PreferenceProfile to run election on</span>

<span class="sd">    `seats`</span>
<span class="sd">    :   number of seats to be elected</span>

<span class="sd">    `ballot_ties`</span>
<span class="sd">    :   (Optional) resolves input ballot ties if True, else assumes ballots have no ties</span>

<span class="sd">    `tiebreak`</span>
<span class="sd">    :   (Optional) resolves procedural and final ties by specified tiebreak</span>

<span class="sd">    **Methods**</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
        <span class="n">ballot_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_ties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span> <span class="o">=</span> <span class="n">tiebreak</span>

    <span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conducts a hybrid election for one seat with a cutoff of 2 for the runoff</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for the hybrid election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hybrid_equivalent</span> <span class="o">=</span> <span class="n">SNTV_STV_Hybrid</span><span class="p">(</span>
            <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">transfer</span><span class="o">=</span><span class="n">fractional_transfer</span><span class="p">,</span>
            <span class="n">r1_cutoff</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">seats</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">hybrid_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="k">return</span> <span class="n">outcome</span>

    <span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates a complete TopTwo election</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ElectionState object for a complete election</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.TopTwo.run_election" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_election</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.TopTwo.run_election" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Simulates a complete TopTwo election</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for a complete election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_election</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a complete TopTwo election</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for a complete election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_step</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="votekit.elections.election_types.TopTwo.run_step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_step</span><span class="p">()</span></code>

<a href="#votekit.elections.election_types.TopTwo.run_step" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Conducts a hybrid election for one seat with a cutoff of 2 for the runoff</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.election_state.ElectionState" href="#votekit.election_state.ElectionState">ElectionState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An ElectionState object for the hybrid election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/election_types.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ElectionState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts a hybrid election for one seat with a cutoff of 2 for the runoff</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ElectionState object for the hybrid election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hybrid_equivalent</span> <span class="o">=</span> <span class="n">SNTV_STV_Hybrid</span><span class="p">(</span>
        <span class="n">profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span>
        <span class="n">transfer</span><span class="o">=</span><span class="n">fractional_transfer</span><span class="p">,</span>
        <span class="n">r1_cutoff</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">seats</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">tiebreak</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tiebreak</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="n">hybrid_equivalent</span><span class="o">.</span><span class="n">run_election</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">outcome</span>
    <span class="k">return</span> <span class="n">outcome</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div><h2 id="cleaning">Cleaning<a class="headerlink" href="#cleaning" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.cleaning.clean_profile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">clean_profile</span><span class="p">(</span><span class="n">pp</span><span class="p">,</span> <span class="n">clean_ballot_func</span><span class="p">)</span></code>

<a href="#votekit.cleaning.clean_profile" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Allows user-defined cleaning rules for PrefrenceProfile. Input function
that applies modification or rule to a single ballot</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile to clean</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>clean_ballot_func</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>], <a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>function that             takes a list of ballots and cleans each ballot</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PreferenceProfile</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a cleaned preference profile</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cleaning.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clean_profile</span><span class="p">(</span>
    <span class="n">pp</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">clean_ballot_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Ballot</span><span class="p">],</span> <span class="n">Ballot</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows user-defined cleaning rules for PrefrenceProfile. Input function</span>
<span class="sd">    that applies modification or rule to a single ballot</span>

<span class="sd">    Args:</span>
<span class="sd">        pp (PreferenceProfile): a preference profile to clean</span>
<span class="sd">        clean_ballot_func (Callable[[Ballot], Ballot]): function that \</span>
<span class="sd">            takes a list of ballots and cleans each ballot</span>

<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a cleaned preference profile</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># apply cleaning function to clean all ballots</span>
    <span class="k">if</span> <span class="n">clean_ballot_func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cleaned</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">clean_ballot_func</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">ballots</span><span class="p">)</span>
    <span class="c1"># group ballots that have the same ranking after cleaning</span>
    <span class="n">grouped_ballots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">cleaned</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ballot</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="c1"># merge ballots in the same groups</span>
    <span class="n">new_ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">merge_ballots</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">grouped_ballots</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">new_ballots</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.cleaning.deduplicate_profiles" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">deduplicate_profiles</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span></code>

<a href="#votekit.cleaning.deduplicate_profiles" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a preference profile, deduplicates its ballots.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile to clean</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PreferenceProfile</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a cleaned preference profile without duplicates</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cleaning.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deduplicate_profiles</span><span class="p">(</span><span class="n">pp</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a preference profile, deduplicates its ballots.</span>

<span class="sd">    Args:</span>
<span class="sd">        pp (PreferenceProfile): a preference profile to clean</span>

<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a cleaned preference profile without duplicates</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">deduplicate_ballots</span><span class="p">(</span><span class="n">ballot</span><span class="p">:</span> <span class="n">Ballot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Ballot</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a ballot and deduplicates its rankings</span>

<span class="sd">        Args:</span>
<span class="sd">            ballot (Ballot): a ballot with duplicates in its ranking</span>

<span class="sd">        Returns:</span>
<span class="sd">            Ballot: a ballot without duplicates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
        <span class="n">dedup_ranking</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span> <span class="ow">and</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dedup_ranking</span><span class="p">:</span>
                <span class="c1"># dedup_ranking.append({None})</span>
                <span class="n">dedup_ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand</span><span class="p">)</span>
        <span class="n">new_ballot</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">),</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">dedup_ranking</span><span class="p">,</span>
            <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">new_ballot</span>

    <span class="n">pp_clean</span> <span class="o">=</span> <span class="n">clean_profile</span><span class="p">(</span><span class="n">pp</span><span class="o">=</span><span class="n">pp</span><span class="p">,</span> <span class="n">clean_ballot_func</span><span class="o">=</span><span class="n">deduplicate_ballots</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pp_clean</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.cleaning.merge_ballots" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">merge_ballots</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span></code>

<a href="#votekit.cleaning.merge_ballots" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Takes a list of ballots with the same ranking and merge them into one ballot.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of ballots to deduplicate</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Ballot</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a ballot with the same ranking and aggregated weight and voters</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cleaning.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">merge_ballots</span><span class="p">(</span><span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Ballot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes a list of ballots with the same ranking and merge them into one ballot.</span>

<span class="sd">    Args:</span>
<span class="sd">        ballots (list[Ballot]): a list of ballots to deduplicate</span>

<span class="sd">    Returns:</span>
<span class="sd">        Ballot: a ballot with the same ranking and aggregated weight and voters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">weight</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">)</span>
    <span class="n">ranking</span> <span class="o">=</span> <span class="n">ballots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ranking</span>
    <span class="n">voters_to_merge</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">voters</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">ballots</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">voters</span><span class="p">]</span>
    <span class="n">voters</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">voters_to_merge</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">voters</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">:</span> <span class="n">b1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b2</span><span class="p">),</span> <span class="n">voters_to_merge</span><span class="p">)</span>
        <span class="n">voters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">voters</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Ballot</span><span class="p">(</span><span class="n">ranking</span><span class="o">=</span><span class="n">ranking</span><span class="p">,</span> <span class="n">voters</span><span class="o">=</span><span class="n">voters</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.cleaning.remove_empty_ballots" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">remove_empty_ballots</span><span class="p">(</span><span class="n">pp</span><span class="p">,</span> <span class="n">keep_candidates</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#votekit.cleaning.remove_empty_ballots" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Removes empty ballots from a preference profile.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile to clean</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>keep_candidates</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, keep all of the candidates
from the original preference profile in the returned preference profile.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PreferenceProfile</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a cleaned preference profile</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cleaning.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_empty_ballots</span><span class="p">(</span>
    <span class="n">pp</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">keep_candidates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes empty ballots from a preference profile.</span>

<span class="sd">    Args:</span>
<span class="sd">        pp (PreferenceProfile): a preference profile to clean</span>
<span class="sd">        keep_candidates (bool, optional): if True, keep all of the candidates</span>
<span class="sd">            from the original preference profile in the returned preference profile.</span>

<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a cleaned preference profile</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ballots_nonempty</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">deepcopy</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span> <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">pp</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span> <span class="k">if</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">keep_candidates</span><span class="p">:</span>
        <span class="n">old_cands</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">())</span>
        <span class="n">pp_clean</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballots_nonempty</span><span class="p">,</span> <span class="n">candidates</span><span class="o">=</span><span class="n">old_cands</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pp_clean</span> <span class="o">=</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">ballots_nonempty</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pp_clean</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.cleaning.remove_noncands" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">remove_noncands</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">non_cands</span><span class="p">)</span></code>

<a href="#votekit.cleaning.remove_noncands" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Removes user-assigned non-candidates from ballots, deletes ballots
that are empty as a result of the removal.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile to clean</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>non_cands</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of non-candidates to be removed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PreferenceProfile</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a profile with non-candidates removed</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/cleaning.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_noncands</span><span class="p">(</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">non_cands</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PreferenceProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes user-assigned non-candidates from ballots, deletes ballots</span>
<span class="sd">    that are empty as a result of the removal.</span>

<span class="sd">    Args:</span>
<span class="sd">        profile (PreferenceProfile): a preference profile to clean</span>
<span class="sd">        non_cands (list[str]): a list of non-candidates to be removed</span>

<span class="sd">    Returns:</span>
<span class="sd">        PreferenceProfile: a profile with non-candidates removed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">remove_from_ballots</span><span class="p">(</span><span class="n">ballot</span><span class="p">:</span> <span class="n">Ballot</span><span class="p">,</span> <span class="n">non_cands</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Ballot</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes non-candidiates from ballot objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            ballot (Ballot): a ballot to be cleaned</span>
<span class="sd">            non_cands (list[str]): a list of candidates to remove</span>

<span class="sd">        Returns:</span>
<span class="sd">            Ballot: _description_</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: adjust so string and list of strings are acceptable inputes</span>

        <span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">non_cands</span><span class="p">:</span>
            <span class="n">to_remove</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">item</span><span class="p">})</span>

        <span class="n">ranking</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span>
        <span class="n">clean_ranking</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">to_remove</span> <span class="ow">and</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">clean_ranking</span><span class="p">:</span>
                <span class="n">clean_ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand</span><span class="p">)</span>

        <span class="n">clean_ballot</span> <span class="o">=</span> <span class="n">Ballot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">clean_ranking</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">),</span>
            <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">clean_ballot</span>

    <span class="n">cleaned</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">remove_from_ballots</span><span class="p">(</span><span class="n">ballot</span><span class="p">,</span> <span class="n">non_cands</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">ballots</span>
        <span class="k">if</span> <span class="n">remove_from_ballots</span><span class="p">(</span><span class="n">ballot</span><span class="p">,</span> <span class="n">non_cands</span><span class="p">)</span><span class="o">.</span><span class="n">ranking</span>
    <span class="p">]</span>
    <span class="n">grouped_ballots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">cleaned</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ballot</span><span class="p">:</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="c1"># merge ballots in the same groups</span>
    <span class="n">new_ballots</span> <span class="o">=</span> <span class="p">[</span><span class="n">merge_ballots</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">grouped_ballots</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">PreferenceProfile</span><span class="p">(</span><span class="n">ballots</span><span class="o">=</span><span class="n">new_ballots</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h2 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.utils.borda_scores" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">borda_scores</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">ballot_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">score_vector</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#votekit.utils.borda_scores" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Calculates Borda scores for a PreferenceProfile</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Inputed profile of ballots</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballot_length</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Length of a ballot, if None length of longest ballot is
used</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>score_vector</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[list]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Borda weights, if None assigned based length of the
longest ballot</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of candidates (keys) and Borda scores (values)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">borda_scores</span><span class="p">(</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
    <span class="n">ballot_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">score_vector</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates Borda scores for a PreferenceProfile</span>

<span class="sd">    Args:</span>
<span class="sd">        profile: Inputed profile of ballots</span>
<span class="sd">        ballot_length: Length of a ballot, if None length of longest ballot is</span>
<span class="sd">            used</span>
<span class="sd">        score_vector: Borda weights, if None assigned based length of the</span>
<span class="sd">            longest ballot</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary of candidates (keys) and Borda scores (values)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ballot_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ballot_length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">)</span> <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">ballots</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">score_vector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">score_vector</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">ballot_length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

    <span class="n">candidate_borda</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">profile</span><span class="o">.</span><span class="n">ballots</span><span class="p">:</span>
        <span class="n">current_ind</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">candidates_covered</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="n">position_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">local_score_vector</span> <span class="o">=</span> <span class="n">score_vector</span><span class="p">[</span><span class="n">current_ind</span> <span class="p">:</span> <span class="n">current_ind</span> <span class="o">+</span> <span class="n">position_size</span><span class="p">]</span>
            <span class="n">borda_allocation</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">local_score_vector</span><span class="p">)</span> <span class="o">/</span> <span class="n">position_size</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                <span class="n">candidate_borda</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">borda_allocation</span><span class="p">)</span> <span class="o">*</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
            <span class="n">current_ind</span> <span class="o">+=</span> <span class="n">position_size</span>
            <span class="n">candidates_covered</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="c1"># If ballot was incomplete, evenly allocation remaining points</span>
        <span class="k">if</span> <span class="n">current_ind</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">score_vector</span><span class="p">):</span>
            <span class="n">remainder_cands</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">candidates_covered</span><span class="p">))</span>
            <span class="n">remainder_score_vector</span> <span class="o">=</span> <span class="n">score_vector</span><span class="p">[</span><span class="n">current_ind</span><span class="p">:]</span>
            <span class="n">remainder_borda_allocation</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">remainder_score_vector</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span>
                <span class="n">remainder_cands</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">remainder_cands</span><span class="p">:</span>
                <span class="n">candidate_borda</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Fraction</span><span class="p">(</span><span class="n">remainder_borda_allocation</span><span class="p">)</span> <span class="o">*</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="n">candidate_borda</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.first_place_votes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">first_place_votes</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span></code>

<a href="#votekit.utils.first_place_votes" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Calculates first-place votes for a PreferenceProfile</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Inputed profile of ballots</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of candidates (keys) and first place vote totals (values)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">first_place_votes</span><span class="p">(</span><span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates first-place votes for a PreferenceProfile</span>

<span class="sd">    Args:</span>
<span class="sd">        profile: Inputed profile of ballots</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary of candidates (keys) and first place vote totals (values)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cands</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">cand</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">votes</span><span class="p">)</span> <span class="k">for</span> <span class="n">cand</span><span class="p">,</span> <span class="n">votes</span> <span class="ow">in</span> <span class="n">compute_votes</span><span class="p">(</span><span class="n">cands</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.mentions" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">mentions</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span></code>

<a href="#votekit.utils.mentions" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Calculates total mentions for a PreferenceProfile</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Inputed profile of ballots</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of candidates (keys) and mention totals (values)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mentions</span><span class="p">(</span><span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates total mentions for a PreferenceProfile</span>

<span class="sd">    Args:</span>
<span class="sd">        profile: Inputed profile of ballots</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary of candidates (keys) and mention totals (values)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mentions</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">ballots</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_ballots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">rank</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cand</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mentions</span><span class="p">:</span>
                    <span class="n">mentions</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">mentions</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">))</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span>
                        <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>
                    <span class="p">)</span>  <span class="c1"># split mentions for candidates that are tied</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">mentions</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mentions</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.metrics.distances.earth_mover_dist" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">earth_mover_dist</span><span class="p">(</span><span class="n">pp1</span><span class="p">,</span> <span class="n">pp2</span><span class="p">)</span></code>

<a href="#votekit.metrics.distances.earth_mover_dist" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Computes the earth mover distance between two elections. </p>
<p>Assumes both elections share the same candidates</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp1</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Profile for first election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>pp2</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Profile for second election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Earth mover distance between inputted elections</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/metrics/distances.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">earth_mover_dist</span><span class="p">(</span><span class="n">pp1</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">pp2</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the earth mover distance between two elections. \n</span>
<span class="sd">    Assumes both elections share the same candidates</span>

<span class="sd">    Args:</span>
<span class="sd">        pp1: Profile for first election</span>
<span class="sd">        pp2: Profile for second election</span>

<span class="sd">    Returns:</span>
<span class="sd">        Earth mover distance between inputted elections</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># create ballot graph</span>
    <span class="n">ballot_graph</span> <span class="o">=</span> <span class="n">BallotGraph</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">pp2</span><span class="p">)</span><span class="o">.</span><span class="n">graph</span>
    <span class="c1"># ballot_graph = graph.from_profile(profile=pp2, complete=True)</span>

    <span class="c1"># Solving Earth Mover Distance</span>
    <span class="n">electA_distr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">em_array</span><span class="p">(</span><span class="n">pp</span><span class="o">=</span><span class="n">pp1</span><span class="p">))</span>
    <span class="n">electB_distr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">em_array</span><span class="p">(</span><span class="n">pp</span><span class="o">=</span><span class="n">pp2</span><span class="p">))</span>

    <span class="c1"># Floyd Warshall Shortest Distance alorithm. Returns a dictionary of shortest path for each node</span>
    <span class="n">fw_dist_dict</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">floyd_warshall</span><span class="p">(</span><span class="n">ballot_graph</span><span class="p">)</span>
    <span class="n">keys_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">fw_dist_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">cost_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">keys_list</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys_list</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys_list</span><span class="p">)):</span>
        <span class="n">node_dict</span> <span class="o">=</span> <span class="n">fw_dist_dict</span><span class="p">[</span><span class="n">keys_list</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
        <span class="n">cost_col</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">node_dict</span><span class="o">.</span><span class="n">items</span><span class="p">())]</span>
        <span class="n">cost_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost_col</span>
    <span class="n">earth_mover_matrix</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">emd</span><span class="p">(</span><span class="n">electA_distr</span><span class="p">,</span> <span class="n">electB_distr</span><span class="p">,</span> <span class="n">cost_matrix</span><span class="p">)</span>

    <span class="c1"># Hadamard Product = Earth mover dist between two matrices</span>
    <span class="n">earth_mover_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">cost_matrix</span><span class="p">,</span> <span class="n">earth_mover_matrix</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">earth_mover_dist</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.metrics.distances.lp_dist" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">lp_dist</span><span class="p">(</span><span class="n">pp1</span><span class="p">,</span> <span class="n">pp2</span><span class="p">,</span> <span class="n">p_value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

<a href="#votekit.metrics.distances.lp_dist" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Computes the L_p distance between two election distributions.
Use 'inf' for infinity norm. </p>
<p>Assumes both elections share the same candidates.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp1</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Profile for first election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>pp2</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Profile for second election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>p_value</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[int, str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Distance parameter, 1 for Manhattan, 2 for Euclidean </p>
<p>or 'inf' for Chebyshev distance</p>
            </div>
          </td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Lp distance between two elections</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/metrics/distances.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">lp_dist</span><span class="p">(</span>
    <span class="n">pp1</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
    <span class="n">pp2</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span>
    <span class="n">p_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the L_p distance between two election distributions.</span>
<span class="sd">    Use &#39;inf&#39; for infinity norm. \n</span>
<span class="sd">    Assumes both elections share the same candidates.</span>

<span class="sd">    Args:</span>
<span class="sd">        pp1: Profile for first election</span>
<span class="sd">        pp2: Profile for second election</span>
<span class="sd">        p_value: Distance parameter, 1 for Manhattan, 2 for Euclidean \n</span>
<span class="sd">            or &#39;inf&#39; for Chebyshev distance</span>

<span class="sd">    Returns:</span>
<span class="sd">        Lp distance between two elections</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pp_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">pp1</span><span class="p">,</span> <span class="n">pp2</span><span class="p">]</span>
    <span class="n">pp_2arry</span> <span class="o">=</span> <span class="n">profiles_to_ndarrys</span><span class="p">(</span><span class="n">pp_list</span><span class="p">)</span>
    <span class="n">electA</span> <span class="o">=</span> <span class="n">pp_2arry</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">electB</span> <span class="o">=</span> <span class="n">pp_2arry</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p_value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">electA</span><span class="p">)):</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">electA</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">electB</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="o">**</span> <span class="n">p_value</span>
            <span class="nb">sum</span> <span class="o">+=</span> <span class="n">diff</span>
        <span class="n">lp_dist</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">**</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">p_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lp_dist</span>

    <span class="k">elif</span> <span class="n">p_value</span> <span class="o">==</span> <span class="s2">&quot;inf&quot;</span><span class="p">:</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">electA</span><span class="p">,</span> <span class="n">electB</span><span class="p">)]</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported input type&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.metrics.distances.em_array" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">em_array</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span></code>

<a href="#votekit.metrics.distances.em_array" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Converts a PreferenceProfile into a distribution using ballot graphs.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Profile for a given election</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Distribution of ballots for an election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/metrics/distances.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">em_array</span><span class="p">(</span><span class="n">pp</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a PreferenceProfile into a distribution using ballot graphs.</span>

<span class="sd">    Args:</span>
<span class="sd">        pp: Profile for a given election</span>

<span class="sd">    Returns:</span>
<span class="sd">        Distribution of ballots for an election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ballot_graph</span> <span class="o">=</span> <span class="n">BallotGraph</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>
    <span class="n">node_cand_map</span> <span class="o">=</span> <span class="n">ballot_graph</span><span class="o">.</span><span class="n">label_cands</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()))</span>
    <span class="n">pp_dict</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># invert node_cand_map to map to pp_dict</span>
    <span class="n">inverted</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">node_cand_map</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">combined_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">node_cand_map</span><span class="p">}</span>

    <span class="c1"># map nodes with weight of corresponding rank</span>
    <span class="n">node_pp_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">inverted</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span> <span class="n">pp_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pp_dict</span><span class="p">}</span>

    <span class="n">complete_election_dict</span> <span class="o">=</span> <span class="n">combined_dict</span> <span class="o">|</span> <span class="n">node_pp_dict</span>
    <span class="n">elect_distr</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">float</span><span class="p">(</span><span class="n">complete_election_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">complete_election_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">elect_distr</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.elections.transfers.fractional_transfer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fractional_transfer</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">ballots</span><span class="p">,</span> <span class="n">votes</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span></code>

<a href="#votekit.elections.transfers.fractional_transfer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Calculates fractional transfer from winner, then removes winner
from the list of ballots</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>winner</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Candidate to transfer votes from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Ballot objects</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>votes</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Contains candidates and their corresponding vote totals</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>threshold</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Value required to be elected, used to calculate transfer value</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Modified ballots with transfered weights and the winning canidated removed</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/transfers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fractional_transfer</span><span class="p">(</span>
    <span class="n">winner</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">],</span> <span class="n">votes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates fractional transfer from winner, then removes winner</span>
<span class="sd">    from the list of ballots</span>

<span class="sd">    Args:</span>
<span class="sd">        winner: Candidate to transfer votes from</span>
<span class="sd">        ballots: List of Ballot objects</span>
<span class="sd">        votes: Contains candidates and their corresponding vote totals</span>
<span class="sd">        threshold: Value required to be elected, used to calculate transfer value</span>

<span class="sd">    Returns:</span>
<span class="sd">        Modified ballots with transfered weights and the winning canidated removed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">transfer_value</span> <span class="o">=</span> <span class="p">(</span><span class="n">votes</span><span class="p">[</span><span class="n">winner</span><span class="p">]</span> <span class="o">-</span> <span class="n">threshold</span><span class="p">)</span> <span class="o">/</span> <span class="n">votes</span><span class="p">[</span><span class="n">winner</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="n">new_ranking</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="ow">and</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="n">winner</span><span class="p">}:</span>
            <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">transfer_value</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cand</span> <span class="o">!=</span> <span class="p">{</span><span class="n">winner</span><span class="p">}:</span>
                    <span class="n">new_ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cand</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.elections.transfers.seqRCV_transfer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">seqRCV_transfer</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">ballots</span><span class="p">,</span> <span class="n">votes</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span></code>

<a href="#votekit.elections.transfers.seqRCV_transfer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Transfer method Sequential RCV elections</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>winner</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Candidate to transfer votes from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Ballot objects</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>votes</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Contains candidates and their corresponding vote totals</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>threshold</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Value required to be elected, used to calculate transfer value</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Original list of ballots as Sequential RCV does not transfer votes</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/transfers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">seqRCV_transfer</span><span class="p">(</span>
    <span class="n">winner</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">],</span> <span class="n">votes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transfer method Sequential RCV elections</span>

<span class="sd">    Args:</span>
<span class="sd">        winner: Candidate to transfer votes from</span>
<span class="sd">        ballots: List of Ballot objects</span>
<span class="sd">        votes: Contains candidates and their corresponding vote totals</span>
<span class="sd">        threshold: Value required to be elected, used to calculate transfer value</span>

<span class="sd">    Returns:</span>
<span class="sd">        Original list of ballots as Sequential RCV does not transfer votes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ballots</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.elections.transfers.random_transfer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">random_transfer</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">ballots</span><span class="p">,</span> <span class="n">votes</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span></code>

<a href="#votekit.elections.transfers.random_transfer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Cambridge-style transfer where transfer ballots are selected randomly</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>winner</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Candidate to transfer votes from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Ballot objects</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>votes</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Contains candidates and their corresponding vote totals</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>threshold</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Value required to be elected, used to calculate transfer value</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Modified ballots with transfered weights and the winning canidated removed</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/elections/transfers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">random_transfer</span><span class="p">(</span>
    <span class="n">winner</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">],</span> <span class="n">votes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cambridge-style transfer where transfer ballots are selected randomly</span>

<span class="sd">    Args:</span>
<span class="sd">        winner: Candidate to transfer votes from</span>
<span class="sd">        ballots: List of Ballot objects</span>
<span class="sd">        votes: Contains candidates and their corresponding vote totals</span>
<span class="sd">        threshold: Value required to be elected, used to calculate transfer value</span>

<span class="sd">    Returns:</span>
<span class="sd">        Modified ballots with transfered weights and the winning canidated removed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># turn all of winner&#39;s ballots into (multiple) ballots of weight 1</span>
    <span class="n">weight_1_ballots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="ow">and</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="n">winner</span><span class="p">}:</span>
            <span class="c1"># note: under random transfer, weights should always be integers</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">)):</span>
                <span class="n">weight_1_ballots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">Ballot</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                        <span class="n">ranking</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">,</span>
                        <span class="n">weight</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                        <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="c1"># remove winner&#39;s ballots</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ballot</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span> <span class="ow">and</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="n">winner</span><span class="p">})</span>
    <span class="p">]</span>

    <span class="n">surplus_ballots</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">weight_1_ballots</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">votes</span><span class="p">[</span><span class="n">winner</span><span class="p">])</span> <span class="o">-</span> <span class="n">threshold</span><span class="p">)</span>
    <span class="n">ballots</span> <span class="o">+=</span> <span class="n">surplus_ballots</span>

    <span class="n">transfered</span> <span class="o">=</span> <span class="n">remove_cand</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">transfered</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h2 id="plotting">Plotting<a class="headerlink" href="#plotting" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.plots.mds.distance_matrix" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">distance_matrix</span><span class="p">(</span><span class="n">pp_arr</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#votekit.plots.mds.distance_matrix" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Creates pairwise distance matrix between preference profiles. The i-th and
j-th entry are pairwise distance between i-th col preference profile and
the j-th row preference profile.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pp_arr</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of preference profiles</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>distance</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span>[..., int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Callable distance function type. See distance.py</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Distance matrix for an election</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/plots/mds.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">distance_matrix</span><span class="p">(</span>
    <span class="n">pp_arr</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PreferenceProfile</span><span class="p">],</span> <span class="n">distance</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates pairwise distance matrix between preference profiles. The i-th and</span>
<span class="sd">    j-th entry are pairwise distance between i-th col preference profile and</span>
<span class="sd">    the j-th row preference profile.</span>

<span class="sd">    Args:</span>
<span class="sd">        pp_arr: List of preference profiles</span>
<span class="sd">        distance: Callable distance function type. See distance.py</span>

<span class="sd">    Returns:</span>
<span class="sd">        Distance matrix for an election</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pp_arr</span><span class="p">)</span>
    <span class="n">dist_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">rows</span><span class="p">,</span> <span class="n">rows</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rows</span><span class="p">):</span>
            <span class="n">dist_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">pp_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pp_arr</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">dist_matrix</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">dist_matrix</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.plots.mds.plot_MDS" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">plot_MDS</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">marker_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#votekit.plots.mds.plot_MDS" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Creates a multidimensional scaling plot.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, list[<a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary with key being a 'color' and value being list of </p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>PreferenceProfiles.</code></td>
          <td>
                <code>ex</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>{'color': list[PreferenceProfile]}</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>distance</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span>[..., int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Distance function</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>marker_size</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Size of plotted points</p>
            </div>
          </td>
          <td>
                <code>5</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An MDS plot</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/plots/mds.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_MDS</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">PreferenceProfile</span><span class="p">]],</span>
    <span class="n">distance</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
    <span class="n">marker_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a multidimensional scaling plot.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: Dictionary with key being a &#39;color&#39; and value being list of \n</span>
<span class="sd">        PreferenceProfiles. ex: {&#39;color&#39;: list[PreferenceProfile]}</span>
<span class="sd">        distance: Distance function</span>
<span class="sd">        marker_size: Size of plotted points</span>

<span class="sd">    Returns:</span>
<span class="sd">        An MDS plot</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># combine all lists to create distance matrix</span>
    <span class="n">combined_pp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pp_list</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">combined_pp</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pp_list</span><span class="p">)</span>

    <span class="c1"># compute distance matrix</span>
    <span class="n">dist_matrix</span> <span class="o">=</span> <span class="n">distance_matrix</span><span class="p">(</span><span class="n">combined_pp</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">mds</span> <span class="o">=</span> <span class="n">manifold</span><span class="o">.</span><span class="n">MDS</span><span class="p">(</span>
        <span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">max_iter</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span>
        <span class="n">eps</span><span class="o">=</span><span class="mf">1e-9</span><span class="p">,</span>
        <span class="n">dissimilarity</span><span class="o">=</span><span class="s2">&quot;precomputed&quot;</span><span class="p">,</span>
        <span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">normalized_stress</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">mds</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dist_matrix</span><span class="p">))</span><span class="o">.</span><span class="n">embedding_</span>

    <span class="c1"># Plot and color data</span>
    <span class="n">start_pos</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value_list</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">start_pos</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">pos</span><span class="p">[</span><span class="n">start_pos</span><span class="p">:</span><span class="n">end_pos</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="n">pos</span><span class="p">[</span><span class="n">start_pos</span><span class="p">:</span><span class="n">end_pos</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">s</span><span class="o">=</span><span class="n">marker_size</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">start_pos</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;MDS Plot for Pair Wise Election Distances&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">plt</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.plots.profile_plots.plot_summary_stats" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">plot_summary_stats</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">stat</span><span class="p">,</span> <span class="n">multi_color</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#votekit.plots.profile_plots.plot_summary_stats" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Plots histogram of election summary statistics</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a preference profile to visualize</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>stat</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>'first place votes', 'mentions', or 'borda'</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>multi_color</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the bars should be multicolored. Defaults to True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>title</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>title for the figure. Defaults to None.</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Figure</code></td>          <td>
                <code><span title="matplotlib.figure.Figure">Figure</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a figure with the visualization</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/plots/profile_plots.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_summary_stats</span><span class="p">(</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">stat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">multi_color</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plots histogram of election summary statistics</span>

<span class="sd">    Args:</span>
<span class="sd">        profile (PreferenceProfile): a preference profile to visualize</span>
<span class="sd">        stat (str): &#39;first place votes&#39;, &#39;mentions&#39;, or &#39;borda&#39;</span>
<span class="sd">        multi_color (bool, optional): if the bars should be multicolored. Defaults to True.</span>
<span class="sd">        title (str, optional): title for the figure. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Figure: a figure with the visualization</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;first place votes&quot;</span><span class="p">:</span> <span class="n">first_place_votes</span><span class="p">,</span>
        <span class="s2">&quot;mentions&quot;</span><span class="p">:</span> <span class="n">mentions</span><span class="p">,</span>
        <span class="s2">&quot;borda&quot;</span><span class="p">:</span> <span class="n">borda_scores</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">stat_func</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">stat</span><span class="p">]</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">stat_func</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="n">stat</span> <span class="o">==</span> <span class="s2">&quot;first place votes&quot;</span><span class="p">:</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;First Place Votes&quot;</span>
    <span class="k">elif</span> <span class="n">stat</span> <span class="o">==</span> <span class="s2">&quot;mentions&quot;</span><span class="p">:</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;Total Mentions&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;Borda Scores&quot;</span>

    <span class="k">if</span> <span class="n">multi_color</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()))]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">COLOR_LIST</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="n">candidates</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">get_candidates</span><span class="p">()</span>
    <span class="n">y_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">]</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Candidates&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h2 id="utils">Utils<a class="headerlink" href="#utils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="votekit.utils.compute_votes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">compute_votes</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span></code>

<a href="#votekit.utils.compute_votes" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Computes first place votes for all candidates in a preference profile</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>candidates</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of all candidates in a PreferenceProfile</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Ballot objects</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<span title="votekit.utils.CandidateVotes">CandidateVotes</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of tuples (candidate, number of votes) ordered by first place votes</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">compute_votes</span><span class="p">(</span><span class="n">candidates</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">CandidateVotes</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes first place votes for all candidates in a preference profile</span>

<span class="sd">    Args:</span>
<span class="sd">        candidates: List of all candidates in a PreferenceProfile</span>
<span class="sd">        ballots: List of Ballot objects</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of tuples (candidate, number of votes) ordered by first place votes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">votes</span> <span class="o">=</span> <span class="p">{</span><span class="n">cand</span><span class="p">:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">first_place_cand</span> <span class="o">=</span> <span class="n">unset</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_place_cand</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">first_place_cand</span><span class="p">:</span>
                <span class="n">votes</span><span class="p">[</span><span class="n">cand</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_place_cand</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">votes</span><span class="p">[</span><span class="n">first_place_cand</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ballot</span><span class="o">.</span><span class="n">weight</span>

    <span class="n">ordered</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">CandidateVotes</span><span class="p">(</span><span class="n">cand</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">votes</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">votes</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">ordered</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.remove_cand" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">remove_cand</span><span class="p">(</span><span class="n">removed</span><span class="p">,</span> <span class="n">ballots</span><span class="p">)</span></code>

<a href="#votekit.utils.remove_cand" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Removes specified candidate(s) from ballots</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>removed</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.Iterable">Iterable</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Candidate or set of candidates to be removed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ballots</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Ballots to remove canidate(s) from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="votekit.ballot.Ballot" href="#votekit.ballot.Ballot">Ballot</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Updated list of ballots with candidate(s) removed</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_cand</span><span class="p">(</span><span class="n">removed</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">],</span> <span class="n">ballots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes specified candidate(s) from ballots</span>

<span class="sd">    Args:</span>
<span class="sd">        removed: Candidate or set of candidates to be removed</span>
<span class="sd">        ballots: List of Ballots to remove canidate(s) from</span>

<span class="sd">    Returns:</span>
<span class="sd">        Updated list of ballots with candidate(s) removed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">removed</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">remove_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">removed</span><span class="p">}</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">removed</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="n">remove_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">removed</span><span class="p">)</span>

    <span class="n">update</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballots</span><span class="p">:</span>
        <span class="n">new_ranking</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remove_set</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">remove_set</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
                <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">remove_set</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">new_s</span><span class="p">:</span>
                    <span class="n">new_ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_s</span><span class="p">)</span>
            <span class="n">update</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Ballot</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">ranking</span><span class="o">=</span><span class="n">new_ranking</span><span class="p">,</span>
                    <span class="n">weight</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span>
                    <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remove_set</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">:</span>
                <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">remove_set</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">new_s</span><span class="p">:</span>
                    <span class="n">new_ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_s</span><span class="p">)</span>
            <span class="n">update</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Ballot</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">ranking</span><span class="o">=</span><span class="n">new_ranking</span><span class="p">,</span>
                    <span class="n">weight</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span>
                    <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">update</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">update</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.unset" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">unset</span><span class="p">(</span><span class="n">input_set</span><span class="p">)</span></code>

<a href="#votekit.utils.unset" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Removes object from set</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>input_set</code></td>
          <td>
                <code>set</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Input set</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If set has length one returns the object, else returns a list</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">unset</span><span class="p">(</span><span class="n">input_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes object from set</span>

<span class="sd">    Args:</span>
<span class="sd">        input_set: Input set</span>

<span class="sd">    Returns:</span>
<span class="sd">        If set has length one returns the object, else returns a list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">input_set</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">rv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">rv</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.recursively_fix_ties" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">recursively_fix_ties</span><span class="p">(</span><span class="n">ballot_lst</span><span class="p">,</span> <span class="n">num_ties</span><span class="p">)</span></code>

<a href="#votekit.utils.recursively_fix_ties" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Recursively fixes ties in a ballot in the case there is more then one tie</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">recursively_fix_ties</span><span class="p">(</span><span class="n">ballot_lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">],</span> <span class="n">num_ties</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Recursively fixes ties in a ballot in the case there is more then one tie</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># base case, if only one tie to resolved return the list of already</span>
    <span class="c1"># resolved ballots</span>
    <span class="k">if</span> <span class="n">num_ties</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ballot_lst</span>

    <span class="c1"># in the event multiple positions have ties</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">update</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ballot</span> <span class="ow">in</span> <span class="n">ballot_lst</span><span class="p">:</span>
            <span class="n">update</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">fix_ties</span><span class="p">(</span><span class="n">ballot</span><span class="p">)))</span>

        <span class="k">return</span> <span class="n">recursively_fix_ties</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">update</span><span class="p">),</span> <span class="n">num_ties</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.fix_ties" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fix_ties</span><span class="p">(</span><span class="n">ballot</span><span class="p">)</span></code>

<a href="#votekit.utils.fix_ties" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Helper function for recursively_fix_ties. Resolves the first appearing
tied rank in the input ballot by return list of permuted ballots</p>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix_ties</span><span class="p">(</span><span class="n">ballot</span><span class="p">:</span> <span class="n">Ballot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ballot</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for recursively_fix_ties. Resolves the first appearing</span>
<span class="sd">    tied rank in the input ballot by return list of permuted ballots</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ballots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">(</span><span class="n">rank</span><span class="p">):</span>
                <span class="n">resolved</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
                    <span class="n">resolved</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cand</span><span class="p">))</span>
                <span class="n">ballots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">Ballot</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                        <span class="n">ranking</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[:</span><span class="n">idx</span><span class="p">]</span>
                        <span class="o">+</span> <span class="n">resolved</span>
                        <span class="o">+</span> <span class="n">ballot</span><span class="o">.</span><span class="n">ranking</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:],</span>
                        <span class="n">weight</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">weight</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">)),</span>
                        <span class="n">voters</span><span class="o">=</span><span class="n">ballot</span><span class="o">.</span><span class="n">voters</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="n">ballots</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.elect_cands_from_set_ranking" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">elect_cands_from_set_ranking</span><span class="p">(</span><span class="n">ranking</span><span class="p">,</span> <span class="n">seats</span><span class="p">)</span></code>

<a href="#votekit.utils.elect_cands_from_set_ranking" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Splits a ranking into elected and eliminated based on seats,
and if a tie set overlaps the desired number of seats raises a ValueError</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ranking</code></td>
          <td>
                <code>list[set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list-of-set ranking of candidates</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>seats</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seats to fill</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>tuple[list[set[str]], list[set[str]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list-of-sets of elected candidates, a list-of-sets of eliminated candidates</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">elect_cands_from_set_ranking</span><span class="p">(</span>
    <span class="n">ranking</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">seats</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Splits a ranking into elected and eliminated based on seats,</span>
<span class="sd">    and if a tie set overlaps the desired number of seats raises a ValueError</span>

<span class="sd">    Args:</span>
<span class="sd">        ranking: A list-of-set ranking of candidates</span>
<span class="sd">        seats: Number of seats to fill</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list-of-sets of elected candidates, a list-of-sets of eliminated candidates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cands_elected</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">elected</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">eliminated</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ranking</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cands_elected</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">seats</span><span class="p">:</span>
            <span class="n">cands_elected</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">elected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">eliminated</span> <span class="o">=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>
            <span class="k">break</span>

    <span class="k">if</span> <span class="n">cands_elected</span> <span class="o">!=</span> <span class="n">seats</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Cannot elect correct number of candidates without breaking ties.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">elected</span><span class="p">,</span> <span class="n">eliminated</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.scores_into_set_list" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">score_dict</span><span class="p">,</span> <span class="n">candidate_subset</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#votekit.utils.scores_into_set_list" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Sorts candidates based on a scoring dictionary (i.e Borda, First-Place)</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>score_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary between candidates (key) and their score (value)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>candidate_subset</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[list[str], set[str], None]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Relevant candidates to sort</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Candidate rankings in a list-of-sets form</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">scores_into_set_list</span><span class="p">(</span>
    <span class="n">score_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">candidate_subset</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sorts candidates based on a scoring dictionary (i.e Borda, First-Place)</span>

<span class="sd">    Args:</span>
<span class="sd">        score_dict: Dictionary between candidates (key) and their score (value)</span>
<span class="sd">        candidate_subset: Relevant candidates to sort</span>

<span class="sd">    Returns:</span>
<span class="sd">        Candidate rankings in a list-of-sets form</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">candidate_subset</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">candidate_subset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">candidate_subset</span><span class="p">)</span>

    <span class="n">tier_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">score_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tier_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">}</span>
    <span class="n">tier_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">tier_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">tier_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">candidate_subset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tier_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">t</span> <span class="o">&amp;</span> <span class="n">candidate_subset</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tier_list</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span> <span class="o">&amp;</span> <span class="n">candidate_subset</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">]</span>
    <span class="k">return</span> <span class="n">tier_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.tie_broken_ranking" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">tie_broken_ranking</span><span class="p">(</span><span class="n">ranking</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span></code>

<a href="#votekit.utils.tie_broken_ranking" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Breaks ties in a list-of-sets ranking according to a given scheme</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ranking</code></td>
          <td>
                <code>list[set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list-of-set ranking of candidates</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>profile</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="votekit.pref_profile.PreferenceProfile" href="#votekit.pref_profile.PreferenceProfile">PreferenceProfile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The election ballot profile</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>tiebreak</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Method of tiebreak, currently supports 'none', 'random', 'borda', 'firstplace'</p>
            </div>
          </td>
          <td>
                <code>&#39;none&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list-of-set ranking of candidates (tie broken down to one candidate sets unless
tiebreak = 'none')</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">tie_broken_ranking</span><span class="p">(</span>
    <span class="n">ranking</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">profile</span><span class="p">:</span> <span class="n">PreferenceProfile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Breaks ties in a list-of-sets ranking according to a given scheme</span>

<span class="sd">    Args:</span>
<span class="sd">        ranking: A list-of-set ranking of candidates</span>
<span class="sd">        profile: The election ballot profile</span>
<span class="sd">        tiebreak: Method of tiebreak, currently supports &#39;none&#39;, &#39;random&#39;, &#39;borda&#39;, &#39;firstplace&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list-of-set ranking of candidates (tie broken down to one candidate sets unless</span>
<span class="sd">            tiebreak = &#39;none&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">new_ranking</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">tiebreak</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
        <span class="n">new_ranking</span> <span class="o">=</span> <span class="n">ranking</span>
    <span class="k">elif</span> <span class="n">tiebreak</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
            <span class="n">shuffled_s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="n">new_ranking</span> <span class="o">+=</span> <span class="p">[{</span><span class="n">c</span><span class="p">}</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">shuffled_s</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">tiebreak</span> <span class="o">==</span> <span class="s2">&quot;firstplace&quot;</span><span class="p">:</span>
        <span class="n">tiebreak_scores</span> <span class="o">=</span> <span class="n">first_place_votes</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
            <span class="n">ordered_set</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">tiebreak_scores</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
            <span class="n">new_ranking</span> <span class="o">+=</span> <span class="n">ordered_set</span>
    <span class="k">elif</span> <span class="n">tiebreak</span> <span class="o">==</span> <span class="s2">&quot;borda&quot;</span><span class="p">:</span>
        <span class="n">tiebreak_scores</span> <span class="o">=</span> <span class="n">borda_scores</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
            <span class="n">ordered_set</span> <span class="o">=</span> <span class="n">scores_into_set_list</span><span class="p">(</span><span class="n">tiebreak_scores</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
            <span class="n">new_ranking</span> <span class="o">+=</span> <span class="n">ordered_set</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid tiebreak code was provided&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tiebreak</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">new_ranking</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initial tiebreak was unsuccessful, performing random tiebreak&quot;</span><span class="p">)</span>
        <span class="n">new_ranking</span> <span class="o">=</span> <span class="n">tie_broken_ranking</span><span class="p">(</span>
            <span class="n">ranking</span><span class="o">=</span><span class="n">new_ranking</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span> <span class="n">tiebreak</span><span class="o">=</span><span class="s2">&quot;random&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">new_ranking</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="votekit.utils.candidate_position_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">candidate_position_dict</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span></code>

<a href="#votekit.utils.candidate_position_dict" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Creates a dictionary with the integer ranking of candidates given a set ranking
i.e. A &gt; B, C &gt; D returns {A: 1, B: 2, C: 2, D: 4}</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ranking</code></td>
          <td>
                <code>list[set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list-of-set ranking of candidates</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of candidates (keys) and integer rankings (values)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/votekit/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">candidate_position_dict</span><span class="p">(</span><span class="n">ranking</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a dictionary with the integer ranking of candidates given a set ranking</span>
<span class="sd">    i.e. A &gt; B, C &gt; D returns {A: 1, B: 2, C: 2, D: 4}</span>

<span class="sd">    Args:</span>
<span class="sd">        ranking: A list-of-set ranking of candidates</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary of candidates (keys) and integer rankings (values)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">candidate_positions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">tie_set</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">tie_set</span><span class="p">:</span>
            <span class="n">candidate_positions</span><span class="p">[</span><span class="n">candidate</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="n">position</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tie_set</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">candidate_positions</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>